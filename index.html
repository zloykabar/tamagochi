<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–º–∞–≥–æ—á–∏ - –ü–ª–∞–Ω –¥–æ–º–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: #6ee7b7;
            text-shadow: 0 2px 10px rgba(110, 231, 183, 0.3);
        }
        
        .subtitle {
            color: #94a3b8;
            font-size: 1.1rem;
        }
        
        .game-area {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ */
        .pet-selection {
            text-align: center;
        }
        
        .selection-title {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #fbbf24;
        }
        
        .pets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .pet-option {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }
        
        .pet-option:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.12);
            border-color: #6ee7b7;
        }
        
        .pet-option.selected {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.15);
            box-shadow: 0 5px 15px rgba(251, 191, 36, 0.2);
        }
        
        .pet-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
            font-size: 4rem;
        }
        
        .pet-name {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .pet-description {
            font-size: 0.9rem;
            color: #cbd5e1;
            margin-bottom: 15px;
            min-height: 40px;
        }
        
        .start-button {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            border: none;
            padding: 16px 45px;
            font-size: 1.3rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }
        
        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
        }
        
        .start-button:disabled {
            background: #475569;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω */
        .game-screen {
            display: none;
        }
        
        .screen-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .back-button {
            background: #475569;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .back-button:hover {
            background: #64748b;
            transform: translateX(-3px);
        }
        
        .pet-info-bar {
            display: flex;
            gap: 20px;
            align-items: center;
            color: #fbbf24;
            font-size: 1.1rem;
            flex-wrap: wrap;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å */
        .main-game {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
            min-height: 600px;
        }
        
        /* –ü–ª–∞–Ω –¥–æ–º–∞ */
        .house-plan-container {
            flex: 2;
            background: #1e293b;
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }
        
        .house-plan {
            width: 100%;
            height: 100%;
            min-height: 500px;
            position: relative;
            background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
            cursor: pointer;
        }
        
        /* –ü–ª–∞–Ω –¥–æ–º–∞ –≤–∏–¥ —Å–≤–µ—Ä—Ö—É */
        .house-outline {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 300px;
            background: #fef3c7;
            border: 5px solid #92400e;
            border-radius: 10px;
        }
        
        /* –ö–æ–º–Ω–∞—Ç—ã –≤ –ø–ª–∞–Ω–µ –¥–æ–º–∞ */
        .room-plan {
            position: absolute;
            border: 2px solid #4b5563;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            overflow: hidden;
        }
        
        .room-plan:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }
        
        .room-plan.active {
            border: 3px solid #fbbf24;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
            z-index: 20;
        }
        
        .room-label {
            font-size: 0.9rem;
            font-weight: bold;
            color: #1f2937;
            margin-top: 5px;
            text-align: center;
            padding: 2px 5px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.8);
        }
        
        .room-icon {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        /* –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç –≤ –ø–ª–∞–Ω–µ */
        .living-room-plan {
            top: 60px;
            left: 60px;
            width: 120px;
            height: 140px;
            background: #c4b5fd;
        }
        
        .kitchen-plan {
            top: 60px;
            left: 190px;
            width: 110px;
            height: 140px;
            background: #fde68a;
        }
        
        .bedroom-plan {
            top: 210px;
            left: 60px;
            width: 120px;
            height: 130px;
            background: #ddd6fe;
        }
        
        .bathroom-plan {
            top: 210px;
            left: 190px;
            width: 110px;
            height: 130px;
            background: #bae6fd;
        }
        
        .hallway-plan {
            top: 60px;
            left: 310px;
            width: 70px;
            height: 280px;
            background: #d1d5db;
        }
        
        /* –£–ª–∏—Ü–∞ –∏ –¥–≤–æ—Ä */
        .street-area {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 450px;
            height: 150px;
            background: #065f46;
            border: 3px solid #047857;
            border-radius: 10px;
            z-index: 5;
        }
        
        .road {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 40px;
            background: #4b5563;
            border: 2px dashed #9ca3af;
        }
        
        .tree-yard {
            position: absolute;
            font-size: 2rem;
        }
        
        .tree-yard:nth-child(1) { top: 20px; left: 30px; }
        .tree-yard:nth-child(2) { top: 20px; right: 30px; }
        .tree-yard:nth-child(3) { bottom: 20px; left: 60px; }
        .tree-yard:nth-child(4) { bottom: 20px; right: 60px; }
        
        .fence {
            position: absolute;
            width: 100%;
            height: 20px;
            background: #92400e;
            display: flex;
            justify-content: space-around;
        }
        
        .fence-top {
            top: 0;
        }
        
        .fence-bottom {
            bottom: 0;
        }
        
        .fence-post {
            width: 8px;
            height: 100%;
            background: #78350f;
        }
        
        /* –ü–∏—Ç–æ–º–µ—Ü –Ω–∞ –ø–ª–∞–Ω–µ */
        .pet-on-plan {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            z-index: 100;
            transition: all 1s ease;
            filter: drop-shadow(0 3px 5px rgba(0, 0, 0, 0.3));
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .pet-sleeping {
            animation: sleepFloat 2s infinite ease-in-out;
        }
        
        @keyframes sleepFloat {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
        }
        
        .pet-eating {
            animation: eatAnimation 0.6s infinite alternate;
        }
        
        @keyframes eatAnimation {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(10deg); }
        }
        
        .pet-playing {
            animation: playAnimation 0.5s infinite alternate;
        }
        
        @keyframes playAnimation {
            0% { transform: translate(-50%, -50%) translateY(0); }
            100% { transform: translate(-50%, -50%) translateY(-5px); }
        }
        
        .pet-bathing {
            animation: bathAnimation 0.8s infinite alternate;
        }
        
        @keyframes bathAnimation {
            0% { transform: translate(-50%, -50%) scale(1); }
            100% { transform: translate(-50%, -50%) scale(1.1); }
        }
        
        .pet-walking {
            animation: walkAnimation 0.7s infinite alternate;
        }
        
        @keyframes walkAnimation {
            0% { transform: translate(-50%, -50%) rotate(-2deg); }
            100% { transform: translate(-50%, -50%) rotate(2deg); }
        }
        
        /* –ö–∞–∫–∞—à–∫–∏ –Ω–∞ –ø–ª–∞–Ω–µ */
        .poop-on-plan {
            position: absolute;
            font-size: 1.2rem;
            z-index: 90;
            animation: poopAppear 0.5s ease-out;
        }
        
        @keyframes poopAppear {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            70% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls-panel {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .stats {
            display: grid;
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .stat {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 10px;
        }
        
        .stat-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .bar-container {
            height: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .bar {
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s;
        }
        
        .hunger-bar { background: #ef4444; }
        .happiness-bar { background: #fbbf24; }
        .energy-bar { background: #3b82f6; }
        .health-bar { background: #10b981; }
        .hygiene-bar { background: #8b5cf6; }
        
        /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .action-btn {
            background: #4f46e5;
            color: white;
            border: none;
            padding: 12px 8px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            transition: all 0.2s;
            font-size: 0.85rem;
        }
        
        .action-btn:hover {
            background: #4338ca;
            transform: translateY(-2px);
        }
        
        .action-btn:disabled {
            background: #475569;
            cursor: not-allowed;
            transform: none;
        }
        
        .action-btn i {
            font-size: 1.2rem;
        }
        
        /* –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –µ–¥—ã */
        .food-selection {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            border-radius: 15px;
            z-index: 1000;
            padding: 20px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .food-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #fbbf24;
        }
        
        .food-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
            width: 100%;
            max-width: 400px;
        }
        
        .food-option {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .food-option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        .food-emoji {
            font-size: 2rem;
        }
        
        .food-name {
            font-size: 0.9rem;
            text-align: center;
        }
        
        .close-food-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        /* –°–æ–æ–±—â–µ–Ω–∏—è */
        .message-box {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            flex-grow: 1;
        }
        
        .events-log {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            max-height: 100px;
            overflow-y: auto;
            font-size: 0.85rem;
        }
        
        .event-item {
            margin-bottom: 5px;
            padding: 3px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º */
        .rooms-hint {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            color: #cbd5e1;
            max-width: 200px;
            z-index: 50;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 1100px) {
            .main-game {
                flex-direction: column;
            }
            
            .house-plan-container {
                min-height: 500px;
            }
            
            .house-outline {
                width: 350px;
                height: 260px;
            }
            
            .living-room-plan { width: 100px; height: 120px; }
            .kitchen-plan { width: 90px; height: 120px; left: 170px; }
            .bedroom-plan { width: 100px; height: 110px; }
            .bathroom-plan { width: 90px; height: 110px; left: 170px; }
            .hallway-plan { width: 60px; height: 240px; left: 280px; }
            
            .street-area {
                width: 400px;
                height: 130px;
            }
        }
        
        @media (max-width: 768px) {
            .pets-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .action-buttons {
                grid-template-columns: 1fr;
            }
            
            .food-options {
                grid-template-columns: repeat(2, 1fr);
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .house-outline {
                width: 300px;
                height: 220px;
            }
            
            .living-room-plan { width: 80px; height: 100px; left: 40px; }
            .kitchen-plan { width: 70px; height: 100px; left: 130px; }
            .bedroom-plan { width: 80px; height: 90px; top: 150px; left: 40px; }
            .bathroom-plan { width: 70px; height: 90px; top: 150px; left: 130px; }
            .hallway-plan { width: 50px; height: 200px; left: 220px; }
            
            .street-area {
                width: 320px;
                height: 100px;
            }
            
            .pet-on-plan {
                width: 30px;
                height: 30px;
                font-size: 1.4rem;
            }
        }
        
        @media (max-width: 480px) {
            .pets-grid {
                grid-template-columns: 1fr;
            }
            
            .pet-info-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .food-options {
                grid-template-columns: 1fr;
            }
            
            .house-outline {
                width: 250px;
                height: 180px;
                top: 30px;
            }
            
            .rooms-hint {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –ø–∏—Ç–æ–º—Ü–∞ -->
        <div class="pet-selection" id="selection-screen">
            <header>
                <h1><i class="fas fa-map"></i> –ü–ª–∞–Ω –¥–æ–º–∞ –¢–∞–º–∞–≥–æ—á–∏</h1>
                <p class="subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–∏—Ç–æ–º—Ü–µ–º –Ω–∞ –ø–ª–∞–Ω–µ –¥–æ–º–∞ –∏ —É–ª–∏—Ü–µ</p>
            </header>
            
            <div class="game-area">
                <h2 class="selection-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–µ–≥–æ –ø–∏—Ç–æ–º—Ü–∞</h2>
                
                <div class="pets-grid" id="pets-container">
                    <!-- –ü–∏—Ç–æ–º—Ü—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                
                <button class="start-button" id="start-button" disabled>
                    <i class="fas fa-play-circle"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                </button>
            </div>
        </div>
        
        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div class="game-screen" id="game-screen">
            <div class="screen-header">
                <button class="back-button" id="back-button">
                    <i class="fas fa-arrow-left"></i>
                    –í—ã–±–æ—Ä –ø–∏—Ç–æ–º—Ü–∞
                </button>
                
                <div class="pet-info-bar">
                    <div><i class="fas fa-user"></i> <span id="pet-name-display">–ü–∏—Ç–æ–º–µ—Ü</span></div>
                    <div><i class="fas fa-birthday-cake"></i> –í–æ–∑—Ä–∞—Å—Ç: <span id="pet-age">0</span> –¥–Ω–µ–π</div>
                    <div><i class="fas fa-map-marker-alt"></i> –õ–æ–∫–∞—Ü–∏—è: <span id="current-location">–ì–æ—Å—Ç–∏–Ω–∞—è</span></div>
                </div>
            </div>
            
            <div class="game-area">
                <div class="main-game">
                    <!-- –ü–ª–∞–Ω –¥–æ–º–∞ -->
                    <div class="house-plan-container">
                        <div class="house-plan" id="house-plan">
                            <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ -->
                            <div class="rooms-hint">
                                <strong>–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∫–æ–º–Ω–∞—Ç–µ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞</strong>
                                <br>–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
                            </div>
                            
                            <!-- –ö–æ–Ω—Ç—É—Ä –¥–æ–º–∞ -->
                            <div class="house-outline">
                                <!-- –ö–æ–º–Ω–∞—Ç—ã –Ω–∞ –ø–ª–∞–Ω–µ -->
                                <div class="room-plan living-room-plan" data-room="living-room">
                                    <div class="room-icon">üõãÔ∏è</div>
                                    <div class="room-label">–ì–æ—Å—Ç–∏–Ω–∞—è</div>
                                </div>
                                
                                <div class="room-plan kitchen-plan" data-room="kitchen">
                                    <div class="room-icon">üçΩÔ∏è</div>
                                    <div class="room-label">–ö—É—Ö–Ω—è</div>
                                </div>
                                
                                <div class="room-plan bedroom-plan" data-room="bedroom">
                                    <div class="room-icon">üõèÔ∏è</div>
                                    <div class="room-label">–°–ø–∞–ª—å–Ω—è</div>
                                </div>
                                
                                <div class="room-plan bathroom-plan" data-room="bathroom">
                                    <div class="room-icon">üöø</div>
                                    <div class="room-label">–í–∞–Ω–Ω–∞—è</div>
                                </div>
                                
                                <div class="room-plan hallway-plan" data-room="hallway">
                                    <div class="room-icon">üö™</div>
                                    <div class="room-label">–ö–æ—Ä–∏–¥–æ—Ä</div>
                                </div>
                            </div>
                            
                            <!-- –£–ª–∏—Ü–∞ –∏ –¥–≤–æ—Ä -->
                            <div class="street-area">
                                <!-- –ó–∞–±–æ—Ä —Å–≤–µ—Ä—Ö—É -->
                                <div class="fence fence-top">
                                    <div class="fence-post"></div>
                                    <div class="fence-post"></div>
                                    <div class="fence-post"></div>
                                    <div class="fence-post"></div>
                                    <div class="fence-post"></div>
                                </div>
                                
                                <!-- –î–µ—Ä–µ–≤—å—è –≤–æ –¥–≤–æ—Ä–µ -->
                                <div class="tree-yard">üå≥</div>
                                <div class="tree-yard">üå≥</div>
                                <div class="tree-yard">üå≤</div>
                                <div class="tree-yard">üå≤</div>
                                
                                <!-- –î–æ—Ä–æ–≥–∞ -->
                                <div class="road"></div>
                                
                                <!-- –ó–∞–±–æ—Ä —Å–Ω–∏–∑—É -->
                                <div class="fence fence-bottom">
                                    <div class="fence-post"></div>
                                    <div class="fence-post"></div>
                                    <div class="fence-post"></div>
                                    <div class="fence-post"></div>
                                    <div class="fence-post"></div>
                                </div>
                            </div>
                            
                            <!-- –ü–∏—Ç–æ–º–µ—Ü –Ω–∞ –ø–ª–∞–Ω–µ -->
                            <div class="pet-on-plan" id="pet-on-plan">
                                <!-- –ü–∏—Ç–æ–º–µ—Ü –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –∑–¥–µ—Å—å -->
                            </div>
                            
                            <!-- –ö–∞–∫–∞—à–∫–∏ –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                        </div>
                        
                        <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –µ–¥—ã -->
                        <div class="food-selection" id="food-selection">
                            <h2 class="food-title">–ß–µ–º –ø–æ–∫–æ—Ä–º–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞?</h2>
                            <div class="food-options" id="food-options">
                                <!-- –ï–¥–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                            </div>
                            <button class="close-food-btn" id="close-food-btn">–û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                    
                    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                    <div class="controls-panel">
                        <div class="stats">
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-utensils"></i> –ì–æ–ª–æ–¥</span>
                                    <span id="hunger-value">80%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar hunger-bar" id="hunger-bar" style="width: 80%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-smile"></i> –°—á–∞—Å—Ç—å–µ</span>
                                    <span id="happiness-value">90%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar happiness-bar" id="happiness-bar" style="width: 90%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-bolt"></i> –≠–Ω–µ—Ä–≥–∏—è</span>
                                    <span id="energy-value">75%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar energy-bar" id="energy-bar" style="width: 75%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-heart"></i> –ó–¥–æ—Ä–æ–≤—å–µ</span>
                                    <span id="health-value">95%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar health-bar" id="health-bar" style="width: 95%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-shower"></i> –ß–∏—Å—Ç–æ—Ç–∞</span>
                                    <span id="hygiene-value">100%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar hygiene-bar" id="hygiene-bar" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="action-btn" id="feed-btn">
                                <i class="fas fa-apple-alt"></i>
                                <span>–ü–æ–∫–æ—Ä–º–∏—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="play-btn">
                                <i class="fas fa-gamepad"></i>
                                <span>–ü–æ–∏–≥—Ä–∞—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="sleep-btn">
                                <i class="fas fa-bed"></i>
                                <span>–°–ø–∞—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="clean-btn">
                                <i class="fas fa-shower"></i>
                                <span>–ü–æ–º—ã—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="heal-btn">
                                <i class="fas fa-first-aid"></i>
                                <span>–õ–µ—á–∏—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="toilet-btn">
                                <i class="fas fa-toilet"></i>
                                <span>–¢—É–∞–ª–µ—Ç</span>
                            </button>
                            
                            <button class="action-btn" id="clean-poop-btn">
                                <i class="fas fa-broom"></i>
                                <span>–£–±—Ä–∞—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="walk-btn">
                                <i class="fas fa-walking"></i>
                                <span>–ì—É–ª—è—Ç—å</span>
                            </button>
                        </div>
                        
                        <div class="message-box" id="message">
                            –ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∫–æ–º–Ω–∞—Ç–µ –Ω–∞ –ø–ª–∞–Ω–µ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞
                        </div>
                        
                        <div class="events-log" id="events-log">
                            <div class="event-item">–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–∏—Ç–æ–º—Ü–µ–º –Ω–∞ –ø–ª–∞–Ω–µ –¥–æ–º–∞.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================
        // –î–ê–ù–ù–´–ï –ü–ò–¢–û–ú–¶–ï–í
        // ============================
        const petsData = [
            {
                id: 'dog',
                name: '–°–æ–±–∞–∫–∞',
                emoji: 'üêï',
                color: '#f59e0b',
                description: '–í–µ—Ä–Ω—ã–π –¥—Ä—É–≥, –ª—é–±–∏—Ç –∏–≥—Ä–∞—Ç—å –∏ –≥—É–ª—è—Ç—å',
                sleepEmoji: 'üêïüí§',
                walkEmoji: 'üêï',
                eatEmoji: 'üêïüçñ',
                playEmoji: 'üêïüéæ',
                bathEmoji: 'üêïüöø',
                sleepEffect: 1.2,
                foodTypes: ['meat', 'bone', 'dogfood', 'vegetables']
            },
            {
                id: 'cat',
                name: '–ö–æ—Ç',
                emoji: 'üê±',
                color: '#6b7280',
                description: '–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∏ –≥—Ä–∞—Ü–∏–æ–∑–Ω—ã–π, –ª—é–±–∏—Ç —Å–ø–∞—Ç—å',
                sleepEmoji: 'üê±üí§',
                walkEmoji: 'üê±',
                eatEmoji: 'üê±üêü',
                playEmoji: 'üê±üß∂',
                bathEmoji: 'üê±üöø',
                sleepEffect: 1.5,
                foodTypes: ['fish', 'milk', 'meat', 'catfood']
            },
            {
                id: 'rabbit',
                name: '–ö—Ä–æ–ª–∏–∫',
                emoji: 'üê∞',
                color: '#ef4444',
                description: '–ü—É—à–∏—Å—Ç—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π, –ª—é–±–∏—Ç –º–æ—Ä–∫–æ–≤–∫—É',
                sleepEmoji: 'üê∞üí§',
                walkEmoji: 'üê∞',
                eatEmoji: 'üê∞ü•ï',
                playEmoji: 'üê∞ü•ï',
                bathEmoji: 'üê∞üöø',
                sleepEffect: 1.0,
                foodTypes: ['carrot', 'vegetables', 'grass', 'apple']
            },
            {
                id: 'hamster',
                name: '–•–æ–º—è–∫',
                emoji: 'üêπ',
                color: '#fbbf24',
                description: '–ú–∞–ª–µ–Ω—å–∫–∏–π –∏ —à—É—Å—Ç—Ä—ã–π, –ª—é–±–∏—Ç —Å–µ–º–µ—á–∫–∏',
                sleepEmoji: 'üêπüí§',
                walkEmoji: 'üêπ',
                eatEmoji: 'üêπüå∞',
                playEmoji: 'üêπüèÉ',
                bathEmoji: 'üêπüöø',
                sleepEffect: 0.8,
                foodTypes: ['seeds', 'nuts', 'vegetables', 'fruit']
            },
            {
                id: 'bird',
                name: '–ü—Ç–∏—á–∫–∞',
                emoji: 'üê¶',
                color: '#3b82f6',
                description: '–í–µ—Å–µ–ª–∞—è –ø–µ–≤—É–Ω—å—è, –ª—é–±–∏—Ç –∑–µ—Ä–Ω—ã—à–∫–∏',
                sleepEmoji: 'üê¶üí§',
                walkEmoji: 'üê¶',
                eatEmoji: 'üê¶üåæ',
                playEmoji: 'üê¶üéµ',
                bathEmoji: 'üê¶üöø',
                sleepEffect: 0.9,
                foodTypes: ['seeds', 'grains', 'fruit', 'worm']
            },
            {
                id: 'turtle',
                name: '–ß–µ—Ä–µ–ø–∞—Ö–∞',
                emoji: 'üê¢',
                color: '#10b981',
                description: '–ú–µ–¥–ª–∏—Ç–µ–ª—å–Ω–∞—è –∏ –º—É–¥—Ä–∞—è, –ª—é–±–∏—Ç —Å–∞–ª–∞—Ç',
                sleepEmoji: 'üê¢üí§',
                walkEmoji: 'üê¢',
                eatEmoji: 'üê¢ü•¨',
                playEmoji: 'üê¢üèä',
                bathEmoji: 'üê¢üöø',
                sleepEffect: 1.3,
                foodTypes: ['lettuce', 'vegetables', 'fruit', 'shrimp']
            }
        ];

        // ============================
        // –î–ê–ù–ù–´–ï –ï–î–´
        // ============================
        const foodData = [
            { id: 'meat', emoji: 'üçñ', name: '–ú—è—Å–æ', hunger: 30, health: 5, energy: 10 },
            { id: 'fish', emoji: 'üêü', name: '–†—ã–±–∞', hunger: 25, health: 10, energy: 8 },
            { id: 'bone', emoji: 'ü¶¥', name: '–ö–æ—Å—Ç—å', hunger: 15, happiness: 20, energy: 5 },
            { id: 'dogfood', emoji: 'ü•´', name: '–ö–æ—Ä–º', hunger: 20, health: 5, energy: 15 },
            { id: 'catfood', emoji: 'üçó', name: '–í–∏—Å–∫–∞—Å', hunger: 25, happiness: 15, health: 5 },
            { id: 'carrot', emoji: 'ü•ï', name: '–ú–æ—Ä–∫–æ–≤—å', hunger: 15, health: 10, energy: 5 },
            { id: 'vegetables', emoji: 'ü•¶', name: '–û–≤–æ—â–∏', hunger: 20, health: 15, energy: 10 },
            { id: 'apple', emoji: 'üçé', name: '–Ø–±–ª–æ–∫–æ', hunger: 10, happiness: 10, health: 5 },
            { id: 'seeds', emoji: 'üå∞', name: '–°–µ–º–µ—á–∫–∏', hunger: 12, energy: 8, happiness: 5 },
            { id: 'nuts', emoji: 'ü•ú', name: '–û—Ä–µ—Ö–∏', hunger: 18, health: 8, energy: 12 },
            { id: 'fruit', emoji: 'üçá', name: '–§—Ä—É–∫—Ç—ã', hunger: 15, happiness: 15, health: 10 },
            { id: 'milk', emoji: 'ü•õ', name: '–ú–æ–ª–æ–∫–æ', hunger: 10, health: 5, energy: 5 },
            { id: 'grass', emoji: 'üåø', name: '–¢—Ä–∞–≤–∫–∞', hunger: 8, health: 3, happiness: 5 },
            { id: 'grains', emoji: 'üåæ', name: '–ó–µ—Ä–Ω–∞', hunger: 18, energy: 15, health: 5 },
            { id: 'worm', emoji: 'üêõ', name: '–ß–µ—Ä–≤—è–∫', hunger: 25, energy: 20, happiness: -5 },
            { id: 'lettuce', emoji: 'ü•¨', name: '–°–∞–ª–∞—Ç', hunger: 12, health: 8, energy: 5 },
            { id: 'shrimp', emoji: 'ü¶ê', name: '–ö—Ä–µ–≤–µ—Ç–∫–∞', hunger: 22, health: 10, happiness: 10 }
        ];

        // ============================
        // –î–ê–ù–ù–´–ï –ö–û–ú–ù–ê–¢
        // ============================
        const roomsData = {
            'living-room': {
                name: '–ì–æ—Å—Ç–∏–Ω–∞—è',
                icon: 'üõãÔ∏è',
                color: '#c4b5fd',
                position: { x: 110, y: 130 },
                size: { width: 120, height: 140 },
                actions: ['play']
            },
            'kitchen': {
                name: '–ö—É—Ö–Ω—è',
                icon: 'üçΩÔ∏è',
                color: '#fde68a',
                position: { x: 240, y: 130 },
                size: { width: 110, height: 140 },
                actions: ['feed']
            },
            'bedroom': {
                name: '–°–ø–∞–ª—å–Ω—è',
                icon: 'üõèÔ∏è',
                color: '#ddd6fe',
                position: { x: 110, y: 280 },
                size: { width: 120, height: 130 },
                actions: ['sleep']
            },
            'bathroom': {
                name: '–í–∞–Ω–Ω–∞—è',
                icon: 'üöø',
                color: '#bae6fd',
                position: { x: 240, y: 280 },
                size: { width: 110, height: 130 },
                actions: ['clean', 'toilet']
            },
            'hallway': {
                name: '–ö–æ—Ä–∏–¥–æ—Ä',
                icon: 'üö™',
                color: '#d1d5db',
                position: { x: 360, y: 130 },
                size: { width: 70, height: 280 },
                actions: []
            },
            'yard': {
                name: '–î–≤–æ—Ä',
                icon: 'üå≥',
                color: '#065f46',
                position: { x: 50, y: 430 },
                size: { width: 450, height: 150 },
                actions: ['walk', 'play']
            }
        };

        // ============================
        // –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´
        // ============================
        let gameState = {
            selectedPet: null,
            pet: {
                type: '',
                name: '',
                hunger: 80,
                happiness: 90,
                energy: 75,
                health: 95,
                hygiene: 100,
                age: 0,
                isSleeping: false,
                isEating: false,
                isPlaying: false,
                isBathing: false,
                isWalking: false,
                currentLocation: 'living-room',
                mood: 'happy'
            },
            poops: [],
            lastPoopTime: 0,
            messages: ['–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–∏—Ç–æ–º—Ü–µ–º –Ω–∞ –ø–ª–∞–Ω–µ –¥–æ–º–∞.'],
            isFoodMenuOpen: false
        };

        // ============================
        // –≠–õ–ï–ú–ï–ù–¢–´ –î–û–ú
        // ============================
        const selectionScreen = document.getElementById('selection-screen');
        const gameScreen = document.getElementById('game-screen');
        const petsContainer = document.getElementById('pets-container');
        const startButton = document.getElementById('start-button');
        const backButton = document.getElementById('back-button');
        const petOnPlan = document.getElementById('pet-on-plan');
        const foodSelection = document.getElementById('food-selection');
        const foodOptionsContainer = document.getElementById('food-options');
        const messageElement = document.getElementById('message');
        const eventsLog = document.getElementById('events-log');
        const housePlan = document.getElementById('house-plan');

        // ============================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –í–´–ë–û–†–ê –ü–ò–¢–û–ú–¶–ê
        // ============================
        function initPetSelection() {
            petsContainer.innerHTML = '';
            
            petsData.forEach(pet => {
                const petElement = document.createElement('div');
                petElement.className = 'pet-option';
                petElement.dataset.id = pet.id;
                
                petElement.innerHTML = `
                    <div class="pet-icon" style="color: ${pet.color}">
                        ${pet.emoji}
                    </div>
                    <div class="pet-name">${pet.name}</div>
                    <div class="pet-description">${pet.description}</div>
                    <div style="color: #6ee7b7; font-size: 0.8rem; margin-top: 5px;">
                        <i class="fas fa-map-marked-alt"></i> 5 –∫–æ–º–Ω–∞—Ç + —É–ª–∏—Ü–∞
                    </div>
                `;
                
                petElement.addEventListener('click', () => selectPet(pet.id));
                petsContainer.appendChild(petElement);
            });
        }

        function selectPet(petId) {
            document.querySelectorAll('.pet-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            const selectedElement = document.querySelector(`[data-id="${petId}"]`);
            selectedElement.classList.add('selected');
            
            gameState.selectedPet = petId;
            startButton.disabled = false;
            
            const petData = petsData.find(p => p.id === petId);
            startButton.innerHTML = `<i class="fas fa-play-circle"></i> –ó–∞–≤–µ—Å—Ç–∏ ${petData.name}`;
        }

        // ============================
        // –ó–ê–ü–£–°–ö –ò–ì–†–´
        // ============================
        function startGame() {
            if (!gameState.selectedPet) return;
            
            const petData = petsData.find(p => p.id === gameState.selectedPet);
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            gameState.pet.type = petData.id;
            gameState.pet.name = petData.name;
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
            loadGame();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
            initPetDisplay();
            setupRoomClicks();
            updateGameDisplay();
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
            selectionScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            addEvent(`–í—ã –∑–∞–≤–µ–ª–∏ ${petData.name.toLowerCase()}!`);
            showMessage(`–ü—Ä–∏–≤–µ—Ç! –Ø ${petData.name.toLowerCase()}! –ö–ª–∏–∫–Ω–∏ –ø–æ –∫–æ–º–Ω–∞—Ç–µ –Ω–∞ –ø–ª–∞–Ω–µ, —á—Ç–æ–±—ã —è —Ç—É–¥–∞ –ø–æ—à–µ–ª.`);
        }

        // ============================
        // –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ü–ò–¢–û–ú–¶–ê –ù–ê –ü–õ–ê–ù–ï
        // ============================
        function initPetDisplay() {
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –ø–∏—Ç–æ–º—Ü–∞ –Ω–∞ –ø–ª–∞–Ω–µ
            petOnPlan.textContent = petData.walkEmoji;
            petOnPlan.style.background = petData.color;
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∫–∞–∫–∞—à–∫–∏
            document.querySelectorAll('.poop-on-plan').forEach(poop => poop.remove());
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –∫–∞–∫–∞—à–µ–∫
            gameState.poops = [];
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∏—Ç–æ–º—Ü–∞ –≤ –Ω–∞—á–∞–ª—å–Ω—É—é –∫–æ–º–Ω–∞—Ç—É
            movePetToLocation('living-room');
        }

        function updatePetDisplay() {
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            petOnPlan.classList.remove('pet-sleeping', 'pet-eating', 'pet-playing', 'pet-bathing', 'pet-walking');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —ç–º–æ–¥–∑–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏—é
            if (gameState.pet.isSleeping) {
                petOnPlan.textContent = petData.sleepEmoji;
                petOnPlan.classList.add('pet-sleeping');
            } else if (gameState.pet.isEating) {
                petOnPlan.textContent = petData.eatEmoji;
                petOnPlan.classList.add('pet-eating');
            } else if (gameState.pet.isPlaying) {
                petOnPlan.textContent = petData.playEmoji;
                petOnPlan.classList.add('pet-playing');
            } else if (gameState.pet.isBathing) {
                petOnPlan.textContent = petData.bathEmoji;
                petOnPlan.classList.add('pet-bathing');
            } else if (gameState.pet.isWalking) {
                petOnPlan.textContent = petData.walkEmoji;
                petOnPlan.classList.add('pet-walking');
            } else {
                petOnPlan.textContent = petData.walkEmoji;
                petOnPlan.classList.add('pet-walking');
            }
        }

        // ============================
        // –ü–ï–†–ï–ú–ï–©–ï–ù–ò–ï –ü–ò–¢–û–ú–¶–ê
        // ============================
        function setupRoomClicks() {
            document.querySelectorAll('.room-plan').forEach(room => {
                room.addEventListener('click', () => {
                    const roomId = room.dataset.room;
                    movePetToLocation(roomId);
                });
            });
            
            // –ö–ª–∏–∫ –ø–æ —É–ª–∏—Ü–µ/–¥–≤–æ—Ä—É
            document.querySelector('.street-area').addEventListener('click', () => {
                movePetToLocation('yard');
            });
        }

        function movePetToLocation(locationId) {
            const roomData = roomsData[locationId];
            if (!roomData) return;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            gameState.pet.currentLocation = locationId;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
            gameState.pet.isSleeping = false;
            gameState.pet.isEating = false;
            gameState.pet.isPlaying = false;
            gameState.pet.isBathing = false;
            gameState.pet.isWalking = false;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ –∫–æ–º–Ω–∞—Ç–µ
            let x, y;
            
            // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–Ω–∞—Ç—ã
            if (locationId === 'yard') {
                // –î–ª—è —É–ª–∏—Ü—ã - —Å–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–≤–æ—Ä–∞
                x = roomData.position.x + Math.random() * roomData.size.width;
                y = roomData.position.y + Math.random() * roomData.size.height;
            } else {
                // –î–ª—è –∫–æ–º–Ω–∞—Ç - —Ü–µ–Ω—Ç—Ä –∫–æ–º–Ω–∞—Ç—ã
                x = roomData.position.x + roomData.size.width / 2;
                y = roomData.position.y + roomData.size.height / 2;
            }
            
            // –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
            petOnPlan.style.transition = 'left 1s ease, top 1s ease';
            petOnPlan.style.left = `${x}px`;
            petOnPlan.style.top = `${y}px`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã
            updateActiveRoom(locationId);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
            updatePetDisplay();
            
            // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏
            if (locationId !== gameState.pet.currentLocation) {
                addEvent(`${gameState.pet.name} –ø–æ—à–µ–ª(–ª–∞) –≤ ${roomData.name.toLowerCase()}`);
                showMessage(`${gameState.pet.name} –≤ ${roomData.name.toLowerCase()}`);
            }
            
            updateGameDisplay();
        }

        function updateActiveRoom(roomId) {
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç
            document.querySelectorAll('.room-plan').forEach(room => {
                room.classList.remove('active');
            });
            
            // –í—ã–¥–µ–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–æ–º–Ω–∞—Ç—É
            const activeRoom = document.querySelector(`.room-plan[data-room="${roomId}"]`);
            if (activeRoom) {
                activeRoom.classList.add('active');
            }
        }

        // ============================
        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ì–†–û–í–û–ì–û –ò–ù–¢–ï–†–§–ï–ô–°–ê
        // ============================
        function updateGameDisplay() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            document.getElementById('hunger-bar').style.width = gameState.pet.hunger + '%';
            document.getElementById('happiness-bar').style.width = gameState.pet.happiness + '%';
            document.getElementById('energy-bar').style.width = gameState.pet.energy + '%';
            document.getElementById('health-bar').style.width = gameState.pet.health + '%';
            document.getElementById('hygiene-bar').style.width = gameState.pet.hygiene + '%';
            
            document.getElementById('hunger-value').textContent = Math.round(gameState.pet.hunger) + '%';
            document.getElementById('happiness-value').textContent = Math.round(gameState.pet.happiness) + '%';
            document.getElementById('energy-value').textContent = Math.round(gameState.pet.energy) + '%';
            document.getElementById('health-value').textContent = Math.round(gameState.pet.health) + '%';
            document.getElementById('hygiene-value').textContent = Math.round(gameState.pet.hygiene) + '%';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∏—Ç–æ–º—Ü–µ
            document.getElementById('pet-name-display').textContent = gameState.pet.name;
            document.getElementById('pet-age').textContent = gameState.pet.age;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞—Ü–∏—é
            const roomData = roomsData[gameState.pet.currentLocation];
            document.getElementById('current-location').textContent = roomData ? roomData.name : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
            updateButtons();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
            updatePetDisplay();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
            checkPetCondition();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–≥—Ä—É
            saveGame();
        }

        function updateButtons() {
            const sleepBtn = document.getElementById('sleep-btn');
            const cleanPoopBtn = document.getElementById('clean-poop-btn');
            const playBtn = document.getElementById('play-btn');
            const feedBtn = document.getElementById('feed-btn');
            const cleanBtn = document.getElementById('clean-btn');
            const toiletBtn = document.getElementById('toilet-btn');
            const walkBtn = document.getElementById('walk-btn');
            
            // –ö–Ω–æ–ø–∫–∞ —Å–Ω–∞
            if (gameState.pet.isSleeping) {
                sleepBtn.innerHTML = '<i class="fas fa-sun"></i><span>–†–∞–∑–±—É–¥–∏—Ç—å</span>';
            } else {
                sleepBtn.innerHTML = '<i class="fas fa-bed"></i><span>–°–ø–∞—Ç—å</span>';
            }
            
            // –ö–Ω–æ–ø–∫–∞ —É–±–æ—Ä–∫–∏
            cleanPoopBtn.disabled = gameState.poops.length === 0;
            cleanPoopBtn.innerHTML = `<i class="fas fa-broom"></i><span>–£–±—Ä–∞—Ç—å (${gameState.poops.length})</span>`;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –≤ —Ç–µ–∫—É—â–µ–π –ª–æ–∫–∞—Ü–∏–∏
            const currentRoom = roomsData[gameState.pet.currentLocation];
            const availableActions = currentRoom ? currentRoom.actions : [];
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏, –µ—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ
            playBtn.disabled = !availableActions.includes('play') || gameState.pet.energy < 10 || gameState.pet.isSleeping;
            feedBtn.disabled = !availableActions.includes('feed') || gameState.pet.isSleeping;
            cleanBtn.disabled = !availableActions.includes('clean') || gameState.pet.isSleeping;
            toiletBtn.disabled = !availableActions.includes('toilet') || gameState.pet.isSleeping;
            walkBtn.disabled = !availableActions.includes('walk') || gameState.pet.energy < 20 || gameState.pet.isSleeping;
            sleepBtn.disabled = !availableActions.includes('sleep') || gameState.pet.currentLocation !== 'bedroom';
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏, –∫—Ä–æ–º–µ —Å–Ω–∞, –µ—Å–ª–∏ –ø–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç
            if (gameState.pet.isSleeping) {
                playBtn.disabled = true;
                feedBtn.disabled = true;
                cleanBtn.disabled = true;
                toiletBtn.disabled = true;
                walkBtn.disabled = true;
            }
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –ï–î–´ (–ö–£–•–ù–Ø)
        // ============================
        function openFoodMenu() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ, —á—Ç–æ–±—ã –ø–æ–∫–æ—Ä–º–∏—Ç—å.');
                return;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –∫—É—Ö–Ω—é, –µ—Å–ª–∏ –º—ã –Ω–µ —Ç–∞–º
            if (gameState.pet.currentLocation !== 'kitchen') {
                movePetToLocation('kitchen');
                setTimeout(() => {
                    openFoodMenu();
                }, 1000);
                return;
            }
            
            gameState.isFoodMenuOpen = true;
            foodSelection.style.display = 'flex';
            
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
            foodOptionsContainer.innerHTML = '';
            
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º –µ–¥—É, –ø–æ–¥—Ö–æ–¥—è—â—É—é –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞
            const availableFoods = foodData.filter(food => 
                petData.foodTypes.includes(food.id)
            );
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –µ–¥—ã
            availableFoods.forEach(food => {
                const foodOption = document.createElement('div');
                foodOption.className = 'food-option';
                foodOption.dataset.id = food.id;
                
                foodOption.innerHTML = `
                    <div class="food-emoji">${food.emoji}</div>
                    <div class="food-name">${food.name}</div>
                `;
                
                foodOption.addEventListener('click', () => feedPetWith(food.id));
                foodOptionsContainer.appendChild(foodOption);
            });
        }

        function closeFoodMenu() {
            gameState.isFoodMenuOpen = false;
            foodSelection.style.display = 'none';
        }

        function feedPetWith(foodId) {
            const food = foodData.find(f => f.id === foodId);
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –µ–¥—ã
            gameState.pet.isEating = true;
            updatePetDisplay();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            if (food.hunger) gameState.pet.hunger = Math.min(100, gameState.pet.hunger + food.hunger);
            if (food.happiness) gameState.pet.happiness = Math.min(100, gameState.pet.happiness + (food.happiness || 0));
            if (food.health) gameState.pet.health = Math.min(100, gameState.pet.health + (food.health || 0));
            if (food.energy) gameState.pet.energy = Math.min(100, gameState.pet.energy + (food.energy || 0));
            
            addEvent(`${gameState.pet.name} —Å—ä–µ–ª(–∞) ${food.name.toLowerCase()} –Ω–∞ –∫—É—Ö–Ω–µ`);
            showMessage(`–í–∫—É—Å–Ω—ã–π ${food.name.toLowerCase()}! ${food.emoji}`);
            
            // –®–∞–Ω—Å –ø–æ–∫–∞–∫–∞—Ç—å –ø–æ—Å–ª–µ –µ–¥—ã
            if (Math.random() < 0.4) {
                setTimeout(() => makePoop(), 3000);
            }
            
            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –µ–¥—ã
            setTimeout(() => {
                gameState.pet.isEating = false;
                updatePetDisplay();
            }, 2000);
            
            closeFoodMenu();
            updateGameDisplay();
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –°–ù–ê (–°–ü–ê–õ–¨–ù–Ø)
        // ============================
        function toggleSleep() {
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Å–ø–∞–ª—å–Ω—é, –µ—Å–ª–∏ –º—ã –Ω–µ —Ç–∞–º
            if (gameState.pet.currentLocation !== 'bedroom') {
                movePetToLocation('bedroom');
                setTimeout(() => {
                    toggleSleep();
                }, 1000);
                return;
            }
            
            gameState.pet.isSleeping = !gameState.pet.isSleeping;
            
            if (gameState.pet.isSleeping) {
                // –ó–∞—Å—ã–ø–∞–Ω–∏–µ
                addEvent(`${gameState.pet.name} —É—Å–Ω—É–ª(–∞) –≤ —Å–ø–∞–ª—å–Ω–µ`);
                showMessage(`${petData.name} —Å–ª–∞–¥–∫–æ —Å–ø–∏—Ç... üí§`);
                
                // –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –≤–æ —Å–Ω–µ
                gameState.pet.energy = Math.min(100, gameState.pet.energy + 30);
                gameState.pet.health = Math.min(100, gameState.pet.health + 15);
                
            } else {
                // –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ
                showMessage(`${petData.name} –ø—Ä–æ—Å–Ω—É–ª—Å—è(–∞—Å—å)! –ü–æ–ª–æ–Ω(–Ω–∞) —ç–Ω–µ—Ä–≥–∏–∏! üåÖ`);
            }
            
            updatePetDisplay();
            updateGameDisplay();
        }

        // ============================
        // –ò–ì–†–ê (–ì–û–°–¢–ò–ù–ê–Ø –ò –î–í–û–†)
        // ============================
        function playWithPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ, —á—Ç–æ–±—ã –ø–æ–∏–≥—Ä–∞—Ç—å.');
                return;
            }
            
            if (gameState.pet.energy < 10) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª –¥–ª—è –∏–≥—Ä.');
                return;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–æ–¥—Ö–æ–¥—è—â—É—é –∫–æ–º–Ω–∞—Ç—É –¥–ª—è –∏–≥—Ä
            let playLocation = gameState.pet.currentLocation;
            if (!roomsData[playLocation].actions.includes('play')) {
                playLocation = Math.random() > 0.5 ? 'living-room' : 'yard';
                movePetToLocation(playLocation);
                setTimeout(() => {
                    playWithPet();
                }, 1000);
                return;
            }
            
            const petData = petsData.find(p => p.id === gameState.pet.type);
            const roomData = roomsData[playLocation];
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∏–≥—Ä—ã
            gameState.pet.isPlaying = true;
            updatePetDisplay();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 25);
            gameState.pet.energy = Math.max(0, gameState.pet.energy - 15);
            gameState.pet.hunger = Math.max(0, gameState.pet.hunger - 8);
            
            addEvent(`–í—ã –ø–æ–∏–≥—Ä–∞–ª–∏ —Å ${gameState.pet.name} –≤ ${roomData.name.toLowerCase()}`);
            showMessage(`${petData.name} –≤–µ—Å–µ–ª–æ –∏–≥—Ä–∞–µ—Ç –≤ ${roomData.name.toLowerCase()}! üéÆ`);
            
            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–≥—Ä—ã
            setTimeout(() => {
                gameState.pet.isPlaying = false;
                updatePetDisplay();
                
                // –®–∞–Ω—Å –ø–æ–∫–∞–∫–∞—Ç—å –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã
                if (Math.random() < 0.3) {
                    setTimeout(() => makePoop(), 1000);
                }
            }, 3000);
            
            updateGameDisplay();
        }

        // ============================
        // –í–ê–ù–ù–ê–Ø –ö–û–ú–ù–ê–¢–ê
        // ============================
        function cleanPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º—ã—Ç—å.');
                return;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –≤–∞–Ω–Ω—É—é, –µ—Å–ª–∏ –º—ã –Ω–µ —Ç–∞–º
            if (gameState.pet.currentLocation !== 'bathroom') {
                movePetToLocation('bathroom');
                setTimeout(() => {
                    cleanPet();
                }, 1000);
                return;
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –º—ã—Ç—å—è
            gameState.pet.isBathing = true;
            gameState.pet.hygiene = 100;
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 15);
            
            addEvent(`–í—ã –ø–æ–º—ã–ª–∏ ${gameState.pet.name} –≤ –≤–∞–Ω–Ω–æ–π`);
            showMessage('–ß–∏—Å—Ç–æ—Ç–∞ - –∑–∞–ª–æ–≥ –∑–¥–æ—Ä–æ–≤—å—è! –¢–µ–ø–µ—Ä—å —è –±–ª–µ—â—É! üõÅ');
            
            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –º—ã—Ç—å—è
            setTimeout(() => {
                gameState.pet.isBathing = false;
                updatePetDisplay();
            }, 2000);
            
            updateGameDisplay();
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –¢–£–ê–õ–ï–¢–ê –ò –ö–ê–ö–ê–®–ï–ö
        // ============================
        function useToilet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ.');
                return;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –≤–∞–Ω–Ω—É—é, –µ—Å–ª–∏ –º—ã –Ω–µ —Ç–∞–º
            if (gameState.pet.currentLocation !== 'bathroom') {
                movePetToLocation('bathroom');
                setTimeout(() => {
                    useToilet();
                }, 1000);
                return;
            }
            
            // –®–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—É–∞–ª–µ—Ç–∞
            if (Math.random() < 0.9) {
                setTimeout(() => {
                    showMessage('–£—Å–ø–µ—à–Ω–æ —Å—Ö–æ–¥–∏–ª –≤ —Ç—É–∞–ª–µ—Ç! ‚úÖ');
                    gameState.pet.hygiene = Math.min(100, gameState.pet.hygiene + 20);
                    gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 10);
                    updateGameDisplay();
                }, 1500);
            } else {
                // –ù–µ —É—Å–ø–µ–ª - —Å–¥–µ–ª–∞–ª –ª—É–∂—É
                setTimeout(() => {
                    showMessage('–û–π... –ù–µ —É—Å–ø–µ–ª –¥–æ —Ç—É–∞–ª–µ—Ç–∞... üí©');
                    makePoop();
                }, 1500);
            }
        }

        function makePoop() {
            const now = Date.now();
            if (now - gameState.lastPoopTime < 30000) return; // –ù–µ —á–∞—â–µ —á–µ–º —Ä–∞–∑ –≤ 30 —Å–µ–∫
            
            gameState.lastPoopTime = now;
            
            // –¢–µ–∫—É—â–∞—è –ª–æ–∫–∞—Ü–∏—è
            const currentLocation = gameState.pet.currentLocation;
            const roomData = roomsData[currentLocation];
            
            // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ —Ç–µ–∫—É—â–µ–π –ª–æ–∫–∞—Ü–∏–∏
            let x, y;
            
            if (currentLocation === 'yard') {
                // –î–ª—è —É–ª–∏—Ü—ã - —Å–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤–æ –¥–≤–æ—Ä–µ
                x = roomData.position.x + Math.random() * roomData.size.width;
                y = roomData.position.y + Math.random() * roomData.size.height;
            } else {
                // –î–ª—è –∫–æ–º–Ω–∞—Ç - –ø–æ–∑–∏—Ü–∏—è —Ä—è–¥–æ–º —Å –ø–∏—Ç–æ–º—Ü–µ–º
                const petRect = petOnPlan.getBoundingClientRect();
                const planRect = housePlan.getBoundingClientRect();
                
                x = (petRect.left - planRect.left) + Math.random() * 40 - 20;
                y = (petRect.top - planRect.top) + Math.random() * 40 - 20;
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–æ–º–Ω–∞—Ç—ã
                x = Math.max(roomData.position.x + 10, Math.min(x, roomData.position.x + roomData.size.width - 10));
                y = Math.max(roomData.position.y + 10, Math.min(y, roomData.position.y + roomData.size.height - 10));
            }
            
            const poop = {
                id: Date.now(),
                x: x,
                y: y,
                location: currentLocation,
                createdAt: now
            };
            
            gameState.poops.push(poop);
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞–∫–∞—à–∫–∏
            const poopElement = document.createElement('div');
            poopElement.className = 'poop-on-plan';
            poopElement.dataset.id = poop.id;
            poopElement.textContent = 'üí©';
            poopElement.style.left = `${poop.x}px`;
            poopElement.style.top = `${poop.y}px`;
            
            housePlan.appendChild(poopElement);
            
            // –£—Ö—É–¥—à–µ–Ω–∏–µ –≥–∏–≥–∏–µ–Ω—ã
            gameState.pet.hygiene = Math.max(0, gameState.pet.hygiene - 25);
            
            addEvent(`${gameState.pet.name} –Ω–∞–¥–µ–ª–∞–ª(–∞) –∫—É—á–∫—É –≤ ${roomData.name.toLowerCase()}`);
            showMessage('–û–π, –∫–∞–∫–∞—è –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç—å! üí©');
            
            updateGameDisplay();
        }

        function cleanPoop() {
            if (gameState.poops.length === 0) return;
            
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–∞–∫–∞—à–∫–∏
            gameState.poops = [];
            document.querySelectorAll('.poop-on-plan').forEach(poop => poop.remove());
            
            // –£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —á–∏—Å—Ç–æ—Ç—ã
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 15);
            gameState.pet.hygiene = Math.min(100, gameState.pet.hygiene + 10);
            
            addEvent(`–í—ã —É–±—Ä–∞–ª–∏ –≤—Å–µ –∫–∞–∫–∞—à–∫–∏`);
            showMessage('–°–ø–∞—Å–∏–±–æ –∑–∞ —É–±–æ—Ä–∫—É! –¢–µ–ø–µ—Ä—å —á–∏—Å—Ç–æ! üßπ');
            
            updateGameDisplay();
        }

        // ============================
        // –î–†–£–ì–ò–ï –î–ï–ô–°–¢–í–ò–Ø
        // ============================
        function healPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ, —á—Ç–æ–±—ã –ø–æ–¥–ª–µ—á–∏—Ç—å.');
                return;
            }
            
            gameState.pet.health = Math.min(100, gameState.pet.health + 35);
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 10);
            
            addEvent(`–í—ã –ø–æ–¥–ª–µ—á–∏–ª–∏ ${gameState.pet.name}`);
            showMessage('–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –∑–∞–±–æ—Ç–∏—à—å—Å—è –æ –º–æ–µ–º –∑–¥–æ—Ä–æ–≤—å–µ! üíä');
            
            updateGameDisplay();
        }

        function walkWithPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ –¥–ª—è –ø—Ä–æ–≥—É–ª–∫–∏.');
                return;
            }
            
            if (gameState.pet.energy < 20) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª –¥–ª—è –ø—Ä–æ–≥—É–ª–∫–∏.');
                return;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤–æ –¥–≤–æ—Ä, –µ—Å–ª–∏ –º—ã –Ω–µ —Ç–∞–º
            if (gameState.pet.currentLocation !== 'yard') {
                movePetToLocation('yard');
                setTimeout(() => {
                    walkWithPet();
                }, 1000);
                return;
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–≥—É–ª–∫–∏
            gameState.pet.isWalking = true;
            updatePetDisplay();
            
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 20);
            gameState.pet.energy = Math.max(0, gameState.pet.energy - 25);
            gameState.pet.hunger = Math.max(0, gameState.pet.hunger - 15);
            gameState.pet.health = Math.min(100, gameState.pet.health + 10);
            
            addEvent(`–í—ã –ø–æ–≥—É–ª—è–ª–∏ —Å ${gameState.pet.name} –≤–æ –¥–≤–æ—Ä–µ`);
            showMessage('–ü—Ä–æ–≥—É–ª–∫–∞ –≤–æ –¥–≤–æ—Ä–µ –±—ã–ª–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π! üå≥');
            
            // –®–∞–Ω—Å –ø–æ–∫–∞–∫–∞—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ–≥—É–ª–∫–∏
            if (Math.random() < 0.4) {
                setTimeout(() => makePoop(), 2000);
            }
            
            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–æ–≥—É–ª–∫–∏
            setTimeout(() => {
                gameState.pet.isWalking = false;
                updatePetDisplay();
            }, 3000);
            
            updateGameDisplay();
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –£–•–£–î–®–ï–ù–ò–Ø –ü–û–ö–ê–ó–ê–¢–ï–õ–ï–ô
        // ============================
        function degradeStats() {
            if (gameState.pet.type === '') return;
            
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –ë–∞–∑–æ–≤—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —É—Ö—É–¥—à–µ–Ω–∏—è
            let hungerRate = 0.3;
            let happinessRate = 0.2;
            let energyRate = 0.4;
            let hygieneRate = 0.1;
            
            // –°–ø—è—â–∏–π –ø–∏—Ç–æ–º–µ—Ü –º–µ–Ω—å—à–µ —Ç–µ—Ä—è–µ—Ç
            if (gameState.pet.isSleeping) {
                hungerRate *= 0.2;
                happinessRate *= 0.1;
                energyRate = -3; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é –≤–æ —Å–Ω–µ
                hygieneRate *= 0.5;
            }
            
            // –ù–∞ —É–ª–∏—Ü–µ –±–æ–ª—å—à–µ —Ç—Ä–∞—Ç–∏—Ç—Å—è —ç–Ω–µ—Ä–≥–∏–∏
            if (gameState.pet.currentLocation === 'yard') {
                energyRate *= 1.5;
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
            gameState.pet.hunger = Math.max(0, gameState.pet.hunger - hungerRate);
            gameState.pet.happiness = Math.max(0, gameState.pet.happiness - happinessRate);
            gameState.pet.energy = Math.max(0, Math.min(100, gameState.pet.energy - energyRate));
            gameState.pet.hygiene = Math.max(0, gameState.pet.hygiene - hygieneRate);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–∏—Ç–æ–º—Ü–∞
            if (!gameState.pet.isSleeping && !gameState.pet.isEating && 
                !gameState.pet.isPlaying && !gameState.pet.isBathing && !gameState.pet.isWalking) {
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–∫–∞—à–µ–∫
                if (Math.random() < 0.001 && gameState.poops.length < 5) {
                    makePoop();
                }
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ –ª–æ–∫–∞—Ü–∏–∏
                if (Math.random() < 0.005) {
                    const locations = Object.keys(roomsData);
                    const randomLocation = locations[Math.floor(Math.random() * locations.length)];
                    
                    if (randomLocation !== gameState.pet.currentLocation) {
                        movePetToLocation(randomLocation);
                    }
                }
            }
            
            // –í–æ–∑—Ä–∞—Å—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
            if (Math.random() < 0.0005) {
                gameState.pet.age += 1;
                if (gameState.pet.age % 7 === 0) {
                    addEvent(`–ü—Ä–æ—à–ª–∞ –Ω–µ–¥–µ–ª—è! ${gameState.pet.name} —Ä–∞—Å—Ç–µ—Ç!`);
                }
            }
            
            // –ó–¥–æ—Ä–æ–≤—å–µ —É—Ö—É–¥—à–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–ª–æ—Ö–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö
            if (gameState.pet.hunger < 20 || gameState.pet.hygiene < 20 || gameState.pet.happiness < 20) {
                gameState.pet.health = Math.max(0, gameState.pet.health - 0.2);
            }
            
            updateGameDisplay();
        }

        function checkPetCondition() {
            // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            if (gameState.pet.health < 10) {
                showMessage('‚ö†Ô∏è –°–†–û–ß–ù–û! –ü–∏—Ç–æ–º–µ—Ü —Å–µ—Ä—å–µ–∑–Ω–æ –±–æ–ª–µ–Ω! –ù—É–∂–Ω–æ –∫ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä—É!');
            } else if (gameState.pet.hunger < 10) {
                showMessage('üçΩÔ∏è –ü–ò–¢–û–ú–ï–¶ –ì–û–õ–û–î–ê–ï–¢! –°—Ä–æ—á–Ω–æ –ø–æ–∫–æ—Ä–º–∏—Ç–µ!');
            } else if (gameState.pet.hygiene < 10) {
                showMessage('ü§¢ –ü–∏—Ç–æ–º–µ—Ü –≤ –∞–Ω—Ç–∏—Å–∞–Ω–∏—Ç–∞—Ä–∏–∏! –°—Ä–æ—á–Ω–æ –ø–æ–º–æ–π—Ç–µ!');
            }
        }

        // ============================
        // –°–û–û–ë–©–ï–ù–ò–Ø –ò –°–û–ë–´–¢–ò–Ø
        // ============================
        function showMessage(text) {
            messageElement.textContent = text;
            messageElement.style.animation = 'none';
            setTimeout(() => {
                messageElement.style.animation = 'fadeIn 0.3s';
            }, 10);
        }

        function addEvent(text) {
            const now = new Date();
            const time = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            const eventItem = document.createElement('div');
            eventItem.className = 'event-item';
            eventItem.textContent = `[${time}] ${text}`;
            
            eventsLog.prepend(eventItem);
            gameState.messages.unshift(`[${time}] ${text}`);
            
            // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
            if (eventsLog.children.length > 10) {
                eventsLog.removeChild(eventsLog.lastChild);
            }
        }

        // ============================
        // –°–û–•–†–ê–ù–ï–ù–ò–ï –ò –ó–ê–ì–†–£–ó–ö–ê
        // ============================
        function saveGame() {
            const saveData = {
                type: gameState.pet.type,
                pet: gameState.pet,
                poops: gameState.poops,
                messages: gameState.messages.slice(0, 10),
                lastUpdate: Date.now()
            };
            localStorage.setItem('tamagotchi_plan', JSON.stringify(saveData));
        }

        function loadGame() {
            const saved = localStorage.getItem('tamagotchi_plan');
            if (saved) {
                const saveData = JSON.parse(saved);
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–æ—Ç –∂–µ –ø–∏—Ç–æ–º–µ—Ü
                if (saveData.type === gameState.pet.type) {
                    const timePassed = Date.now() - saveData.lastUpdate;
                    const minutesPassed = Math.floor(timePassed / (1000 * 60));
                    
                    gameState.pet = {...saveData.pet};
                    gameState.poops = saveData.poops || [];
                    gameState.messages = saveData.messages || [];
                    
                    // –£—Ö—É–¥—à–µ–Ω–∏–µ –∑–∞ –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è
                    if (minutesPassed > 0) {
                        const degradeMinutes = Math.min(minutesPassed, 180);
                        
                        gameState.pet.hunger = Math.max(0, gameState.pet.hunger - degradeMinutes * 0.2);
                        gameState.pet.happiness = Math.max(0, gameState.pet.happiness - degradeMinutes * 0.15);
                        gameState.pet.energy = Math.max(0, gameState.pet.energy - degradeMinutes * 0.3);
                        gameState.pet.hygiene = Math.max(0, gameState.pet.hygiene - degradeMinutes * 0.08);
                        
                        // –ö–∞–∫–∞—à–∫–∏ –∑–∞ –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è
                        const additionalPoops = Math.floor(minutesPassed / 30);
                        for (let i = 0; i < Math.min(additionalPoops, 3); i++) {
                            setTimeout(() => makePoop(), i * 500);
                        }
                    }
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞ —Å–æ–±—ã—Ç–∏–π
                    eventsLog.innerHTML = '';
                    gameState.messages.forEach(msg => {
                        const eventItem = document.createElement('div');
                        eventItem.className = 'event-item';
                        eventItem.textContent = msg;
                        eventsLog.appendChild(eventItem);
                    });
                    
                    showMessage('–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º! –í–∞—à –ø–∏—Ç–æ–º–µ—Ü –∂–¥–µ—Ç –≤–∞—Å.');
                    addEvent('–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –∏–≥—Ä—É');
                }
            }
        }

        // ============================
        // –í–û–ó–í–†–ê–¢ –ö –í–´–ë–û–†–£
        // ============================
        function goBackToSelection() {
            if (confirm('–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É –ø–∏—Ç–æ–º—Ü–∞? –¢–µ–∫—É—â–∏–π –ø–∏—Ç–æ–º–µ—Ü –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω.')) {
                saveGame();
                
                gameScreen.style.display = 'none';
                selectionScreen.style.display = 'block';
                
                gameState.selectedPet = null;
                startButton.disabled = true;
                startButton.innerHTML = '<i class="fas fa-play-circle"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É';
                
                document.querySelectorAll('.pet-option').forEach(el => {
                    el.classList.remove('selected');
                });
            }
        }

        // ============================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´
        // ============================
        function initGame() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ –ø–∏—Ç–æ–º—Ü–∞
            initPetSelection();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞
            startButton.addEventListener('click', startGame);
            backButton.addEventListener('click', goBackToSelection);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
            document.getElementById('feed-btn').addEventListener('click', openFoodMenu);
            document.getElementById('play-btn').addEventListener('click', playWithPet);
            document.getElementById('sleep-btn').addEventListener('click', toggleSleep);
            document.getElementById('clean-btn').addEventListener('click', cleanPet);
            document.getElementById('heal-btn').addEventListener('click', healPet);
            document.getElementById('toilet-btn').addEventListener('click', useToilet);
            document.getElementById('clean-poop-btn').addEventListener('click', cleanPoop);
            document.getElementById('walk-btn').addEventListener('click', walkWithPet);
            document.getElementById('close-food-btn').addEventListener('click', closeFoodMenu);
            
            // –°–∏—Å—Ç–µ–º–∞ —É—Ö—É–¥—à–µ–Ω–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
            setInterval(degradeStats, 30000);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            setInterval(() => {
                if (!gameState.pet.isSleeping && Math.random() < 0.15) {
                    const locationMessages = {
                        'living-room': ['–ü–æ–∏–≥—Ä–∞–π —Å–æ –º–Ω–æ–π –≤ –≥–æ—Å—Ç–∏–Ω–æ–π!', '–ú—è–≥–∫–∏–π –¥–∏–≤–∞–Ω...', '–í–∫–ª—é—á–∏ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä! üì∫'],
                        'kitchen': ['–•–æ—á—É –ø–æ–∫—É—à–∞—Ç—å! üçΩÔ∏è', '–ü–∞—Ö–Ω–µ—Ç –≤–∫—É—Å–Ω–µ–Ω—å–∫–∏–º!', '–ß—Ç–æ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ?'],
                        'bedroom': ['–•–æ—á—É —Å–ø–∞—Ç—å... üõèÔ∏è', '–ú—è–≥–∫–∞—è –∫—Ä–æ–≤–∞—Ç—å...', '–í—Ä–µ–º—è –æ—Ç–¥—ã—Ö–∞'],
                        'bathroom': ['–ü–æ—Ä–∞ –ø–æ–º—ã—Ç—å—Å—è! üöø', '–ß–∏—Å—Ç–æ—Ç–∞ –≤–∞–∂–Ω–∞!', '–°–≤–µ–∂–∞—è –≤–æ–¥–∏—á–∫–∞'],
                        'hallway': ['–ö—É–¥–∞ –ø–æ–π–¥–µ–º? üö™', '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —á—Ç–æ –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–º–Ω–∞—Ç–∞—Ö', '–ö–æ—Ä–∏–¥–æ—Ä —Ç–∞–∫–æ–π –¥–ª–∏–Ω–Ω—ã–π'],
                        'yard': ['–°–≤–µ–∂–∏–π –≤–æ–∑–¥—É—Ö! üå≥', '–ü—Ç–∏—á–∫–∏ –ø–æ—é—Ç! üê¶', '–î–∞–≤–∞–π –ø–æ–±–µ–≥–∞–µ–º!']
                    };
                    
                    const currentLocation = gameState.pet.currentLocation;
                    const messages = locationMessages[currentLocation] || ['–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —á—Ç–æ –¥–∞–ª—å—à–µ?'];
                    showMessage(messages[Math.floor(Math.random() * messages.length)]);
                }
            }, 20000);
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            window.addEventListener('beforeunload', saveGame);
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
