<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–º–∞–≥–æ—á–∏ - –î–æ–º –ø–∏—Ç–æ–º—Ü–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: #6ee7b7;
            text-shadow: 0 2px 10px rgba(110, 231, 183, 0.3);
        }
        
        .subtitle {
            color: #94a3b8;
            font-size: 1.1rem;
        }
        
        .game-area {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ */
        .pet-selection {
            text-align: center;
        }
        
        .selection-title {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #fbbf24;
        }
        
        .pets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .pet-option {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }
        
        .pet-option:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.12);
            border-color: #6ee7b7;
        }
        
        .pet-option.selected {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.15);
            box-shadow: 0 5px 15px rgba(251, 191, 36, 0.2);
        }
        
        .pet-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
            font-size: 4rem;
        }
        
        .pet-name {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .pet-description {
            font-size: 0.9rem;
            color: #cbd5e1;
            margin-bottom: 15px;
            min-height: 40px;
        }
        
        .start-button {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            border: none;
            padding: 16px 45px;
            font-size: 1.3rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }
        
        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
        }
        
        .start-button:disabled {
            background: #475569;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω */
        .game-screen {
            display: none;
        }
        
        .screen-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .back-button {
            background: #475569;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .back-button:hover {
            background: #64748b;
            transform: translateX(-3px);
        }
        
        .pet-info-bar {
            display: flex;
            gap: 20px;
            align-items: center;
            color: #fbbf24;
            font-size: 1.1rem;
            flex-wrap: wrap;
        }
        
        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º */
        .room-navigation {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .room-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-size: 1rem;
        }
        
        .room-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .room-btn.active {
            background: #4f46e5;
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
        }
        
        /* –û—Å–Ω–æ–≤–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å */
        .main-game {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
            min-height: 500px;
        }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–º–Ω–∞—Ç—ã */
        .room-container {
            flex: 2;
            position: relative;
            background: #1e293b;
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.1);
        }
        
        .room {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 450px;
            transition: opacity 0.5s;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç */
        .living-room {
            background: linear-gradient(180deg, #6d28d9 0%, #4c1d95 100%);
        }
        
        .kitchen {
            background: linear-gradient(180deg, #f59e0b 0%, #d97706 100%);
        }
        
        .bathroom {
            background: linear-gradient(180deg, #0ea5e9 0%, #0369a1 100%);
        }
        
        .bedroom {
            background: linear-gradient(180deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .yard {
            background: linear-gradient(180deg, #10b981 0%, #059669 100%);
        }
        
        /* –û–±—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–º–Ω–∞—Ç */
        .floor {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100px;
        }
        
        .wall {
            position: absolute;
            width: 100%;
            height: calc(100% - 100px);
        }
        
        /* –ì–æ—Å—Ç–∏–Ω–∞—è */
        .living-room .floor {
            background: #92400e; /* –ü–∞—Ä–∫–µ—Ç */
        }
        
        .living-room .wall {
            background: linear-gradient(180deg, #c4b5fd 0%, #a78bfa 100%);
        }
        
        .couch {
            position: absolute;
            bottom: 100px;
            right: 30px;
            width: 120px;
            height: 60px;
            background: #dc2626;
            border-radius: 10px;
        }
        
        .tv {
            position: absolute;
            top: 30px;
            left: 30px;
            width: 100px;
            height: 70px;
            background: #1f2937;
            border: 5px solid #374151;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .rug {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 80px;
            background: #fbbf24;
            border-radius: 15px;
        }
        
        /* –ö—É—Ö–Ω—è */
        .kitchen .floor {
            background: #78716c; /* –ö–∞—Ñ–µ–ª—å */
        }
        
        .kitchen .wall {
            background: linear-gradient(180deg, #fef3c7 0%, #fde68a 100%);
        }
        
        .fridge {
            position: absolute;
            left: 30px;
            top: 30px;
            width: 70px;
            height: 120px;
            background: white;
            border: 3px solid #d1d5db;
            border-radius: 5px;
        }
        
        .stove {
            position: absolute;
            bottom: 100px;
            left: 30px;
            width: 100px;
            height: 60px;
            background: #374151;
            border-radius: 10px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        
        .burner {
            width: 20px;
            height: 20px;
            background: #dc2626;
            border-radius: 50%;
        }
        
        .sink {
            position: absolute;
            bottom: 100px;
            right: 30px;
            width: 80px;
            height: 50px;
            background: #d1d5db;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .table {
            position: absolute;
            bottom: 170px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 60px;
            background: #92400e;
            border-radius: 5px;
        }
        
        /* –í–∞–Ω–Ω–∞—è */
        .bathroom .floor {
            background: #475569; /* –ü–ª–∏—Ç–∫–∞ */
        }
        
        .bathroom .wall {
            background: linear-gradient(180deg, #e0f2fe 0%, #bae6fd 100%);
        }
        
        .toilet-bowl {
            position: absolute;
            bottom: 100px;
            left: 50px;
            width: 60px;
            height: 80px;
            background: white;
            border: 3px solid #d1d5db;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }
        
        .bathtub {
            position: absolute;
            bottom: 100px;
            right: 50px;
            width: 100px;
            height: 60px;
            background: #60a5fa;
            border: 5px solid #3b82f6;
            border-radius: 15px 15px 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }
        
        .shower {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 100px;
            background: #cbd5e1;
            border-radius: 10px;
        }
        
        .sink-bathroom {
            position: absolute;
            top: 30px;
            right: 30px;
            width: 60px;
            height: 40px;
            background: #f3f4f6;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }
        
        /* –°–ø–∞–ª—å–Ω—è */
        .bedroom .floor {
            background: #57534e; /* –ö–æ–≤–µ—Ä */
        }
        
        .bedroom .wall {
            background: linear-gradient(180deg, #ddd6fe 0%, #c4b5fd 100%);
        }
        
        .bed {
            position: absolute;
            bottom: 100px;
            right: 30px;
            width: 150px;
            height: 100px;
            background: #7c3aed;
            border-radius: 10px;
        }
        
        .pillow {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 50px;
            height: 40px;
            background: #c4b5fd;
            border-radius: 8px;
        }
        
        .blanket {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 50px;
            background: #6d28d9;
            border-radius: 0 0 10px 10px;
        }
        
        .wardrobe {
            position: absolute;
            left: 30px;
            bottom: 100px;
            width: 80px;
            height: 120px;
            background: #92400e;
            border-radius: 5px;
        }
        
        .nightstand {
            position: absolute;
            left: 30px;
            bottom: 220px;
            width: 50px;
            height: 40px;
            background: #78350f;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }
        
        /* –î–≤–æ—Ä */
        .yard .floor {
            background: #065f46; /* –¢—Ä–∞–≤–∞ */
        }
        
        .yard .wall {
            background: linear-gradient(180deg, #22d3ee 0%, #0ea5e9 100%);
        }
        
        .tree {
            position: absolute;
            bottom: 100px;
            left: 50px;
            font-size: 4rem;
        }
        
        .flower-bed {
            position: absolute;
            bottom: 105px;
            right: 50px;
            display: flex;
            gap: 10px;
            font-size: 1.8rem;
        }
        
        .fence {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40px;
            background: #92400e;
            display: flex;
            justify-content: space-around;
        }
        
        .fence-post {
            width: 10px;
            height: 100%;
            background: #78350f;
        }
        
        .sun {
            position: absolute;
            top: 30px;
            right: 50px;
            font-size: 3rem;
            animation: sunRotate 10s linear infinite;
        }
        
        @keyframes sunRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* –ü–∏—Ç–æ–º–µ—Ü */
        .pet-container {
            position: absolute;
            bottom: 110px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 120px;
            z-index: 10;
            transition: all 1s ease;
        }
        
        .pet-image {
            width: 100%;
            height: 100%;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
            font-size: 4rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ —Å–Ω–∞ (–≤ —Å–ø–∞–ª—å–Ω–µ) */
        .sleeping {
            animation: sleepFloat 2s infinite ease-in-out;
        }
        
        .zzz {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            color: #fbbf24;
            animation: zzzFloat 1.5s infinite;
        }
        
        @keyframes sleepFloat {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-5px); }
        }
        
        @keyframes zzzFloat {
            0% { opacity: 0; transform: translateX(-50%) translateY(0); }
            50% { opacity: 1; }
            100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –µ–¥—ã (–Ω–∞ –∫—É—Ö–Ω–µ) */
        .eating {
            animation: eatAnimation 0.6s infinite alternate;
        }
        
        @keyframes eatAnimation {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
            100% { transform: translateX(-50%) scale(1); }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –º—ã—Ç—å—è (–≤ –≤–∞–Ω–Ω–æ–π) */
        .bathing {
            animation: bathAnimation 0.8s infinite alternate;
        }
        
        @keyframes bathAnimation {
            0% { transform: translateX(-50%) translateY(0); }
            100% { transform: translateX(-50%) translateY(-3px); }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –∏–≥—Ä—ã (–≤ –≥–æ—Å—Ç–∏–Ω–æ–π –∏ –¥–≤–æ—Ä–µ) */
        .playing {
            animation: playAnimation 0.5s infinite alternate;
        }
        
        @keyframes playAnimation {
            0% { transform: translateX(-50%) rotate(-5deg); }
            100% { transform: translateX(-50%) rotate(5deg); }
        }
        
        /* –ö–∞–∫–∞—à–∫–∏ */
        .poop {
            position: absolute;
            bottom: 105px;
            font-size: 1.8rem;
            z-index: 5;
            animation: poopAppear 0.5s ease-out;
        }
        
        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls-panel {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
        }
        
        .stats {
            display: grid;
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .stat {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 10px;
        }
        
        .stat-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .bar-container {
            height: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .bar {
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s;
        }
        
        .hunger-bar { background: #ef4444; }
        .happiness-bar { background: #fbbf24; }
        .energy-bar { background: #3b82f6; }
        .health-bar { background: #10b981; }
        .hygiene-bar { background: #8b5cf6; }
        
        /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .action-btn {
            background: #4f46e5;
            color: white;
            border: none;
            padding: 12px 8px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            transition: all 0.2s;
            font-size: 0.85rem;
        }
        
        .action-btn:hover {
            background: #4338ca;
            transform: translateY(-2px);
        }
        
        .action-btn:disabled {
            background: #475569;
            cursor: not-allowed;
            transform: none;
        }
        
        .action-btn i {
            font-size: 1.2rem;
        }
        
        /* –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –µ–¥—ã */
        .food-selection {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            border-radius: 15px;
            z-index: 100;
            padding: 20px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .food-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #fbbf24;
        }
        
        .food-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
            width: 100%;
            max-width: 400px;
        }
        
        .food-option {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .food-option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        .food-emoji {
            font-size: 2rem;
        }
        
        .food-name {
            font-size: 0.9rem;
            text-align: center;
        }
        
        .close-food-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        /* –°–æ–æ–±—â–µ–Ω–∏—è */
        .message-box {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .events-log {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            max-height: 100px;
            overflow-y: auto;
            font-size: 0.85rem;
        }
        
        .event-item {
            margin-bottom: 5px;
            padding: 3px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 1100px) {
            .main-game {
                flex-direction: column;
            }
            
            .room-container {
                min-height: 400px;
            }
            
            .pet-container {
                width: 100px;
                height: 100px;
            }
        }
        
        @media (max-width: 768px) {
            .pets-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .action-buttons {
                grid-template-columns: 1fr;
            }
            
            .food-options {
                grid-template-columns: repeat(2, 1fr);
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .room-btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 480px) {
            .pets-grid {
                grid-template-columns: 1fr;
            }
            
            .pet-info-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .food-options {
                grid-template-columns: 1fr;
            }
            
            .room-navigation {
                justify-content: center;
            }
            
            .room-btn span {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –ø–∏—Ç–æ–º—Ü–∞ -->
        <div class="pet-selection" id="selection-screen">
            <header>
                <h1><i class="fas fa-home"></i> –î–æ–º –¢–∞–º–∞–≥–æ—á–∏</h1>
                <p class="subtitle">–£—Ö–∞–∂–∏–≤–∞–π—Ç–µ –∑–∞ –ø–∏—Ç–æ–º—Ü–µ–º –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç–∞—Ö –¥–æ–º–∞</p>
            </header>
            
            <div class="game-area">
                <h2 class="selection-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–µ–≥–æ –ø–∏—Ç–æ–º—Ü–∞</h2>
                
                <div class="pets-grid" id="pets-container">
                    <!-- –ü–∏—Ç–æ–º—Ü—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                
                <button class="start-button" id="start-button" disabled>
                    <i class="fas fa-play-circle"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                </button>
            </div>
        </div>
        
        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div class="game-screen" id="game-screen">
            <div class="screen-header">
                <button class="back-button" id="back-button">
                    <i class="fas fa-arrow-left"></i>
                    –í—ã–±–æ—Ä –ø–∏—Ç–æ–º—Ü–∞
                </button>
                
                <div class="pet-info-bar">
                    <div><i class="fas fa-user"></i> <span id="pet-name-display">–ü–∏—Ç–æ–º–µ—Ü</span></div>
                    <div><i class="fas fa-birthday-cake"></i> –í–æ–∑—Ä–∞—Å—Ç: <span id="pet-age">0</span> –¥–Ω–µ–π</div>
                    <div><i class="fas fa-map-marker-alt"></i> –ö–æ–º–Ω–∞—Ç–∞: <span id="current-room">–ì–æ—Å—Ç–∏–Ω–∞—è</span></div>
                </div>
            </div>
            
            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º -->
            <div class="room-navigation">
                <button class="room-btn active" data-room="living-room">
                    <i class="fas fa-couch"></i><span>–ì–æ—Å—Ç–∏–Ω–∞—è</span>
                </button>
                <button class="room-btn" data-room="kitchen">
                    <i class="fas fa-utensils"></i><span>–ö—É—Ö–Ω—è</span>
                </button>
                <button class="room-btn" data-room="bedroom">
                    <i class="fas fa-bed"></i><span>–°–ø–∞–ª—å–Ω—è</span>
                </button>
                <button class="room-btn" data-room="bathroom">
                    <i class="fas fa-shower"></i><span>–í–∞–Ω–Ω–∞—è</span>
                </button>
                <button class="room-btn" data-room="yard">
                    <i class="fas fa-tree"></i><span>–î–≤–æ—Ä</span>
                </button>
            </div>
            
            <div class="game-area">
                <div class="main-game">
                    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–º–Ω–∞—Ç—ã -->
                    <div class="room-container">
                        <!-- –ì–æ—Å—Ç–∏–Ω–∞—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
                        <div class="room living-room active-room">
                            <div class="wall"></div>
                            <div class="floor"></div>
                            
                            <!-- –ú–µ–±–µ–ª—å –≥–æ—Å—Ç–∏–Ω–æ–π -->
                            <div class="couch"></div>
                            <div class="tv">üì∫</div>
                            <div class="rug"></div>
                            
                            <!-- –ü–∏—Ç–æ–º–µ—Ü -->
                            <div class="pet-container" id="pet-container">
                                <div class="pet-image" id="pet-image"></div>
                            </div>
                        </div>
                        
                        <!-- –ö—É—Ö–Ω—è -->
                        <div class="room kitchen">
                            <div class="wall"></div>
                            <div class="floor"></div>
                            
                            <!-- –ú–µ–±–µ–ª—å –∫—É—Ö–Ω–∏ -->
                            <div class="fridge">‚ùÑÔ∏è</div>
                            <div class="stove">
                                <div class="burner"></div>
                                <div class="burner"></div>
                            </div>
                            <div class="sink">üö∞</div>
                            <div class="table"></div>
                            
                            <!-- –ü–∏—Ç–æ–º–µ—Ü -->
                            <div class="pet-container">
                                <div class="pet-image"></div>
                            </div>
                        </div>
                        
                        <!-- –°–ø–∞–ª—å–Ω—è -->
                        <div class="room bedroom">
                            <div class="wall"></div>
                            <div class="floor"></div>
                            
                            <!-- –ú–µ–±–µ–ª—å —Å–ø–∞–ª—å–Ω–∏ -->
                            <div class="bed">
                                <div class="pillow"></div>
                                <div class="blanket"></div>
                            </div>
                            <div class="wardrobe"></div>
                            <div class="nightstand">üí°</div>
                            
                            <!-- –ü–∏—Ç–æ–º–µ—Ü -->
                            <div class="pet-container">
                                <div class="pet-image"></div>
                            </div>
                        </div>
                        
                        <!-- –í–∞–Ω–Ω–∞—è -->
                        <div class="room bathroom">
                            <div class="wall"></div>
                            <div class="floor"></div>
                            
                            <!-- –ú–µ–±–µ–ª—å –≤–∞–Ω–Ω–æ–π -->
                            <div class="toilet-bowl">üöΩ</div>
                            <div class="bathtub">üõÅ</div>
                            <div class="shower"></div>
                            <div class="sink-bathroom">üö∞</div>
                            
                            <!-- –ü–∏—Ç–æ–º–µ—Ü -->
                            <div class="pet-container">
                                <div class="pet-image"></div>
                            </div>
                        </div>
                        
                        <!-- –î–≤–æ—Ä -->
                        <div class="room yard">
                            <div class="wall"></div>
                            <div class="floor"></div>
                            
                            <!-- –≠–ª–µ–º–µ–Ω—Ç—ã –¥–≤–æ—Ä–∞ -->
                            <div class="tree">üå≥</div>
                            <div class="flower-bed">
                                <span>üåª</span><span>üå∑</span><span>üå∏</span>
                            </div>
                            <div class="fence">
                                <div class="fence-post"></div>
                                <div class="fence-post"></div>
                                <div class="fence-post"></div>
                                <div class="fence-post"></div>
                                <div class="fence-post"></div>
                            </div>
                            <div class="sun">‚òÄÔ∏è</div>
                            
                            <!-- –ü–∏—Ç–æ–º–µ—Ü -->
                            <div class="pet-container">
                                <div class="pet-image"></div>
                            </div>
                        </div>
                        
                        <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –µ–¥—ã -->
                        <div class="food-selection" id="food-selection">
                            <h2 class="food-title">–ß–µ–º –ø–æ–∫–æ—Ä–º–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞?</h2>
                            <div class="food-options" id="food-options">
                                <!-- –ï–¥–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                            </div>
                            <button class="close-food-btn" id="close-food-btn">–û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                    
                    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                    <div class="controls-panel">
                        <div class="stats">
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-utensils"></i> –ì–æ–ª–æ–¥</span>
                                    <span id="hunger-value">80%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar hunger-bar" id="hunger-bar" style="width: 80%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-smile"></i> –°—á–∞—Å—Ç—å–µ</span>
                                    <span id="happiness-value">90%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar happiness-bar" id="happiness-bar" style="width: 90%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-bolt"></i> –≠–Ω–µ—Ä–≥–∏—è</span>
                                    <span id="energy-value">75%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar energy-bar" id="energy-bar" style="width: 75%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-heart"></i> –ó–¥–æ—Ä–æ–≤—å–µ</span>
                                    <span id="health-value">95%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar health-bar" id="health-bar" style="width: 95%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-shower"></i> –ß–∏—Å—Ç–æ—Ç–∞</span>
                                    <span id="hygiene-value">100%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar hygiene-bar" id="hygiene-bar" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="action-btn" id="feed-btn">
                                <i class="fas fa-apple-alt"></i>
                                <span>–ü–æ–∫–æ—Ä–º–∏—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="play-btn">
                                <i class="fas fa-gamepad"></i>
                                <span>–ü–æ–∏–≥—Ä–∞—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="sleep-btn">
                                <i class="fas fa-bed"></i>
                                <span>–°–ø–∞—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="clean-btn">
                                <i class="fas fa-shower"></i>
                                <span>–ü–æ–º—ã—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="heal-btn">
                                <i class="fas fa-first-aid"></i>
                                <span>–õ–µ—á–∏—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="toilet-btn">
                                <i class="fas fa-toilet"></i>
                                <span>–¢—É–∞–ª–µ—Ç</span>
                            </button>
                            
                            <button class="action-btn" id="clean-poop-btn">
                                <i class="fas fa-broom"></i>
                                <span>–£–±—Ä–∞—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="walk-btn">
                                <i class="fas fa-walking"></i>
                                <span>–ì—É–ª—è—Ç—å</span>
                            </button>
                        </div>
                        
                        <div class="message-box" id="message">
                            –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¥–æ–º! –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–Ω–∞—Ç—É –¥–ª—è –ø–∏—Ç–æ–º—Ü–∞.
                        </div>
                    </div>
                </div>
                
                <div class="events-log" id="events-log">
                    <div class="event-item">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¥–æ–º –ø–∏—Ç–æ–º—Ü–∞!</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================
        // –î–ê–ù–ù–´–ï –ü–ò–¢–û–ú–¶–ï–í
        // ============================
        const petsData = [
            {
                id: 'dog',
                name: '–°–æ–±–∞–∫–∞',
                emoji: 'üêï',
                color: '#f59e0b',
                description: '–í–µ—Ä–Ω—ã–π –¥—Ä—É–≥, –ª—é–±–∏—Ç –∏–≥—Ä–∞—Ç—å –∏ –≥—É–ª—è—Ç—å',
                sleepImage: 'üêïüí§',
                walkImage: 'üêï',
                eatImage: 'üêïüçñ',
                playImage: 'üêïüéæ',
                bathImage: 'üêïüöø',
                sleepEffect: 1.2,
                foodTypes: ['meat', 'bone', 'dogfood', 'vegetables']
            },
            {
                id: 'cat',
                name: '–ö–æ—Ç',
                emoji: 'üê±',
                color: '#6b7280',
                description: '–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∏ –≥—Ä–∞—Ü–∏–æ–∑–Ω—ã–π, –ª—é–±–∏—Ç —Å–ø–∞—Ç—å',
                sleepImage: 'üê±üí§',
                walkImage: 'üê±',
                eatImage: 'üê±üêü',
                playImage: 'üê±üß∂',
                bathImage: 'üê±üöø',
                sleepEffect: 1.5,
                foodTypes: ['fish', 'milk', 'meat', 'catfood']
            },
            {
                id: 'rabbit',
                name: '–ö—Ä–æ–ª–∏–∫',
                emoji: 'üê∞',
                color: '#ef4444',
                description: '–ü—É—à–∏—Å—Ç—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π, –ª—é–±–∏—Ç –º–æ—Ä–∫–æ–≤–∫—É',
                sleepImage: 'üê∞üí§',
                walkImage: 'üê∞',
                eatImage: 'üê∞ü•ï',
                playImage: 'üê∞ü•ï',
                bathImage: 'üê∞üöø',
                sleepEffect: 1.0,
                foodTypes: ['carrot', 'vegetables', 'grass', 'apple']
            },
            {
                id: 'hamster',
                name: '–•–æ–º—è–∫',
                emoji: 'üêπ',
                color: '#fbbf24',
                description: '–ú–∞–ª–µ–Ω—å–∫–∏–π –∏ —à—É—Å—Ç—Ä—ã–π, –ª—é–±–∏—Ç —Å–µ–º–µ—á–∫–∏',
                sleepImage: 'üêπüí§',
                walkImage: 'üêπ',
                eatImage: 'üêπüå∞',
                playImage: 'üêπüèÉ',
                bathImage: 'üêπüöø',
                sleepEffect: 0.8,
                foodTypes: ['seeds', 'nuts', 'vegetables', 'fruit']
            },
            {
                id: 'bird',
                name: '–ü—Ç–∏—á–∫–∞',
                emoji: 'üê¶',
                color: '#3b82f6',
                description: '–í–µ—Å–µ–ª–∞—è –ø–µ–≤—É–Ω—å—è, –ª—é–±–∏—Ç –∑–µ—Ä–Ω—ã—à–∫–∏',
                sleepImage: 'üê¶üí§',
                walkImage: 'üê¶',
                eatImage: 'üê¶üåæ',
                playImage: 'üê¶üéµ',
                bathImage: 'üê¶üöø',
                sleepEffect: 0.9,
                foodTypes: ['seeds', 'grains', 'fruit', 'worm']
            },
            {
                id: 'turtle',
                name: '–ß–µ—Ä–µ–ø–∞—Ö–∞',
                emoji: 'üê¢',
                color: '#10b981',
                description: '–ú–µ–¥–ª–∏—Ç–µ–ª—å–Ω–∞—è –∏ –º—É–¥—Ä–∞—è, –ª—é–±–∏—Ç —Å–∞–ª–∞—Ç',
                sleepImage: 'üê¢üí§',
                walkImage: 'üê¢',
                eatImage: 'üê¢ü•¨',
                playImage: 'üê¢üèä',
                bathImage: 'üê¢üöø',
                sleepEffect: 1.3,
                foodTypes: ['lettuce', 'vegetables', 'fruit', 'shrimp']
            }
        ];

        // ============================
        // –î–ê–ù–ù–´–ï –ï–î–´
        // ============================
        const foodData = [
            { id: 'meat', emoji: 'üçñ', name: '–ú—è—Å–æ', hunger: 30, health: 5, energy: 10 },
            { id: 'fish', emoji: 'üêü', name: '–†—ã–±–∞', hunger: 25, health: 10, energy: 8 },
            { id: 'bone', emoji: 'ü¶¥', name: '–ö–æ—Å—Ç—å', hunger: 15, happiness: 20, energy: 5 },
            { id: 'dogfood', emoji: 'ü•´', name: '–ö–æ—Ä–º', hunger: 20, health: 5, energy: 15 },
            { id: 'catfood', emoji: 'üçó', name: '–í–∏—Å–∫–∞—Å', hunger: 25, happiness: 15, health: 5 },
            { id: 'carrot', emoji: 'ü•ï', name: '–ú–æ—Ä–∫–æ–≤—å', hunger: 15, health: 10, energy: 5 },
            { id: 'vegetables', emoji: 'ü•¶', name: '–û–≤–æ—â–∏', hunger: 20, health: 15, energy: 10 },
            { id: 'apple', emoji: 'üçé', name: '–Ø–±–ª–æ–∫–æ', hunger: 10, happiness: 10, health: 5 },
            { id: 'seeds', emoji: 'üå∞', name: '–°–µ–º–µ—á–∫–∏', hunger: 12, energy: 8, happiness: 5 },
            { id: 'nuts', emoji: 'ü•ú', name: '–û—Ä–µ—Ö–∏', hunger: 18, health: 8, energy: 12 },
            { id: 'fruit', emoji: 'üçá', name: '–§—Ä—É–∫—Ç—ã', hunger: 15, happiness: 15, health: 10 },
            { id: 'milk', emoji: 'ü•õ', name: '–ú–æ–ª–æ–∫–æ', hunger: 10, health: 5, energy: 5 },
            { id: 'grass', emoji: 'üåø', name: '–¢—Ä–∞–≤–∫–∞', hunger: 8, health: 3, happiness: 5 },
            { id: 'grains', emoji: 'üåæ', name: '–ó–µ—Ä–Ω–∞', hunger: 18, energy: 15, health: 5 },
            { id: 'worm', emoji: 'üêõ', name: '–ß–µ—Ä–≤—è–∫', hunger: 25, energy: 20, happiness: -5 },
            { id: 'lettuce', emoji: 'ü•¨', name: '–°–∞–ª–∞—Ç', hunger: 12, health: 8, energy: 5 },
            { id: 'shrimp', emoji: 'ü¶ê', name: '–ö—Ä–µ–≤–µ—Ç–∫–∞', hunger: 22, health: 10, happiness: 10 }
        ];

        // ============================
        // –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´
        // ============================
        let gameState = {
            selectedPet: null,
            pet: {
                type: '',
                name: '',
                hunger: 80,
                happiness: 90,
                energy: 75,
                health: 95,
                hygiene: 100,
                age: 0,
                isSleeping: false,
                isEating: false,
                isPlaying: false,
                isBathing: false,
                currentRoom: 'living-room',
                mood: 'happy'
            },
            poops: [],
            lastPoopTime: 0,
            messages: ['–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¥–æ–º –ø–∏—Ç–æ–º—Ü–∞!'],
            isFoodMenuOpen: false
        };

        // ============================
        // –≠–õ–ï–ú–ï–ù–¢–´ –î–û–ú
        // ============================
        const selectionScreen = document.getElementById('selection-screen');
        const gameScreen = document.getElementById('game-screen');
        const petsContainer = document.getElementById('pets-container');
        const startButton = document.getElementById('start-button');
        const backButton = document.getElementById('back-button');
        const roomButtons = document.querySelectorAll('.room-btn');
        const currentRoomDisplay = document.getElementById('current-room');
        const petImage = document.getElementById('pet-image');
        const foodSelection = document.getElementById('food-selection');
        const foodOptionsContainer = document.getElementById('food-options');
        const messageElement = document.getElementById('message');
        const eventsLog = document.getElementById('events-log');

        // ============================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –í–´–ë–û–†–ê –ü–ò–¢–û–ú–¶–ê
        // ============================
        function initPetSelection() {
            petsContainer.innerHTML = '';
            
            petsData.forEach(pet => {
                const petElement = document.createElement('div');
                petElement.className = 'pet-option';
                petElement.dataset.id = pet.id;
                
                petElement.innerHTML = `
                    <div class="pet-icon" style="color: ${pet.color}">
                        ${pet.emoji}
                    </div>
                    <div class="pet-name">${pet.name}</div>
                    <div class="pet-description">${pet.description}</div>
                    <div style="color: #6ee7b7; font-size: 0.8rem; margin-top: 5px;">
                        <i class="fas fa-home"></i> 5 —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
                    </div>
                `;
                
                petElement.addEventListener('click', () => selectPet(pet.id));
                petsContainer.appendChild(petElement);
            });
        }

        function selectPet(petId) {
            document.querySelectorAll('.pet-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            const selectedElement = document.querySelector(`[data-id="${petId}"]`);
            selectedElement.classList.add('selected');
            
            gameState.selectedPet = petId;
            startButton.disabled = false;
            
            const petData = petsData.find(p => p.id === petId);
            startButton.innerHTML = `<i class="fas fa-play-circle"></i> –ó–∞–≤–µ—Å—Ç–∏ ${petData.name}`;
        }

        // ============================
        // –ó–ê–ü–£–°–ö –ò–ì–†–´
        // ============================
        function startGame() {
            if (!gameState.selectedPet) return;
            
            const petData = petsData.find(p => p.id === gameState.selectedPet);
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            gameState.pet.type = petData.id;
            gameState.pet.name = petData.name;
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
            loadGame();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
            initPetDisplay();
            updateGameDisplay();
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
            selectionScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            addEvent(`–í—ã –∑–∞–≤–µ–ª–∏ ${petData.name.toLowerCase()}!`);
            showMessage(`–ü—Ä–∏–≤–µ—Ç! –Ø ${petData.name.toLowerCase()}! –î–æ–º –æ—Ç–ª–∏—á–Ω—ã–π!`);
        }

        // ============================
        // –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ü–ò–¢–û–ú–¶–ê
        // ============================
        function initPetDisplay() {
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            updatePetImage();
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∫–∞–∫–∞—à–∫–∏ –∏ ZZZ
            document.querySelectorAll('.poop').forEach(poop => poop.remove());
            document.querySelectorAll('.zzz').forEach(zzz => zzz.remove());
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –∫–∞–∫–∞—à–µ–∫
            gameState.poops = [];
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –∫–æ–º–Ω–∞—Ç—É
            switchRoom('living-room');
        }

        function updatePetImage() {
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            if (gameState.pet.isSleeping) {
                petImage.textContent = petData.sleepImage;
            } else if (gameState.pet.isEating) {
                petImage.textContent = petData.eatImage;
            } else if (gameState.pet.isPlaying) {
                petImage.textContent = petData.playImage;
            } else if (gameState.pet.isBathing) {
                petImage.textContent = petData.bathImage;
            } else {
                petImage.textContent = petData.walkImage;
            }
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –ö–û–ú–ù–ê–¢
        // ============================
        function switchRoom(roomId) {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            gameState.pet.currentRoom = roomId;
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –∫–æ–º–Ω–∞—Ç—ã
            document.querySelectorAll('.room').forEach(room => {
                room.style.display = 'none';
                room.classList.remove('active-room');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–æ–º–Ω–∞—Ç—É
            const targetRoom = document.querySelector(`.${roomId}`);
            if (targetRoom) {
                targetRoom.style.display = 'block';
                targetRoom.classList.add('active-room');
                
                // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –ø–∏—Ç–æ–º—Ü–∞ –≤ —ç—Ç—É –∫–æ–º–Ω–∞—Ç—É
                const petContainer = targetRoom.querySelector('.pet-container');
                const petImg = targetRoom.querySelector('.pet-image');
                
                if (petContainer && petImg) {
                    petImg.textContent = petImage.textContent;
                    
                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏
                    petContainer.classList.remove('sleeping', 'eating', 'playing', 'bathing');
                    
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∞–Ω–∏–º–∞—Ü–∏—é –¥–ª—è –∫–æ–º–Ω–∞—Ç—ã
                    if (roomId === 'bedroom' && gameState.pet.isSleeping) {
                        petContainer.classList.add('sleeping');
                    } else if (roomId === 'kitchen' && gameState.pet.isEating) {
                        petContainer.classList.add('eating');
                    } else if ((roomId === 'living-room' || roomId === 'yard') && gameState.pet.isPlaying) {
                        petContainer.classList.add('playing');
                    } else if (roomId === 'bathroom' && gameState.pet.isBathing) {
                        petContainer.classList.add('bathing');
                    }
                }
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            roomButtons.forEach(btn => {
                if (btn.dataset.room === roomId) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã
            updateRoomDisplay();
        }

        function updateRoomDisplay() {
            const roomNames = {
                'living-room': '–ì–æ—Å—Ç–∏–Ω–∞—è',
                'kitchen': '–ö—É—Ö–Ω—è',
                'bedroom': '–°–ø–∞–ª—å–Ω—è',
                'bathroom': '–í–∞–Ω–Ω–∞—è',
                'yard': '–î–≤–æ—Ä'
            };
            
            currentRoomDisplay.textContent = roomNames[gameState.pet.currentRoom] || '–ì–æ—Å—Ç–∏–Ω–∞—è';
        }

        // ============================
        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ì–†–û–í–û–ì–û –ò–ù–¢–ï–†–§–ï–ô–°–ê
        // ============================
        function updateGameDisplay() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            document.getElementById('hunger-bar').style.width = gameState.pet.hunger + '%';
            document.getElementById('happiness-bar').style.width = gameState.pet.happiness + '%';
            document.getElementById('energy-bar').style.width = gameState.pet.energy + '%';
            document.getElementById('health-bar').style.width = gameState.pet.health + '%';
            document.getElementById('hygiene-bar').style.width = gameState.pet.hygiene + '%';
            
            document.getElementById('hunger-value').textContent = Math.round(gameState.pet.hunger) + '%';
            document.getElementById('happiness-value').textContent = Math.round(gameState.pet.happiness) + '%';
            document.getElementById('energy-value').textContent = Math.round(gameState.pet.energy) + '%';
            document.getElementById('health-value').textContent = Math.round(gameState.pet.health) + '%';
            document.getElementById('hygiene-value').textContent = Math.round(gameState.pet.hygiene) + '%';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∏—Ç–æ–º—Ü–µ
            document.getElementById('pet-name-display').textContent = gameState.pet.name;
            document.getElementById('pet-age').textContent = gameState.pet.age;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–º–Ω–∞—Ç—É
            updateRoomDisplay();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
            updateButtons();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
            updatePetImage();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
            checkPetCondition();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–≥—Ä—É
            saveGame();
        }

        function updateButtons() {
            const sleepBtn = document.getElementById('sleep-btn');
            const cleanPoopBtn = document.getElementById('clean-poop-btn');
            const playBtn = document.getElementById('play-btn');
            
            // –ö–Ω–æ–ø–∫–∞ —Å–Ω–∞
            if (gameState.pet.isSleeping) {
                sleepBtn.innerHTML = '<i class="fas fa-sun"></i><span>–†–∞–∑–±—É–¥–∏—Ç—å</span>';
            } else {
                sleepBtn.innerHTML = '<i class="fas fa-bed"></i><span>–°–ø–∞—Ç—å</span>';
            }
            
            // –ö–Ω–æ–ø–∫–∞ —É–±–æ—Ä–∫–∏
            cleanPoopBtn.disabled = gameState.poops.length === 0;
            cleanPoopBtn.innerHTML = `<i class="fas fa-broom"></i><span>–£–±—Ä–∞—Ç—å (${gameState.poops.length})</span>`;
            
            // –ö–Ω–æ–ø–∫–∞ –∏–≥—Ä—ã
            playBtn.disabled = gameState.pet.energy < 10 || gameState.pet.isSleeping;
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏ –µ—Å–ª–∏ –ø–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç
            const actionBtns = document.querySelectorAll('.action-btn');
            actionBtns.forEach(btn => {
                if (btn.id !== 'sleep-btn' && gameState.pet.isSleeping) {
                    btn.disabled = true;
                }
            });
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –ï–î–´ (–ö–£–•–ù–Ø)
        // ============================
        function openFoodMenu() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ, —á—Ç–æ–±—ã –ø–æ–∫–æ—Ä–º–∏—Ç—å.');
                return;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –∫—É—Ö–Ω—é
            switchRoom('kitchen');
            
            gameState.isFoodMenuOpen = true;
            foodSelection.style.display = 'flex';
            
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
            foodOptionsContainer.innerHTML = '';
            
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º –µ–¥—É, –ø–æ–¥—Ö–æ–¥—è—â—É—é –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞
            const availableFoods = foodData.filter(food => 
                petData.foodTypes.includes(food.id)
            );
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –µ–¥—ã
            availableFoods.forEach(food => {
                const foodOption = document.createElement('div');
                foodOption.className = 'food-option';
                foodOption.dataset.id = food.id;
                
                foodOption.innerHTML = `
                    <div class="food-emoji">${food.emoji}</div>
                    <div class="food-name">${food.name}</div>
                `;
                
                foodOption.addEventListener('click', () => feedPetWith(food.id));
                foodOptionsContainer.appendChild(foodOption);
            });
        }

        function closeFoodMenu() {
            gameState.isFoodMenuOpen = false;
            foodSelection.style.display = 'none';
        }

        function feedPetWith(foodId) {
            const food = foodData.find(f => f.id === foodId);
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –µ–¥—ã
            const currentRoom = document.querySelector('.active-room');
            const petContainer = currentRoom.querySelector('.pet-container');
            
            petContainer.classList.remove('playing', 'sleeping', 'bathing');
            petContainer.classList.add('eating');
            
            gameState.pet.isEating = true;
            updatePetImage();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            if (food.hunger) gameState.pet.hunger = Math.min(100, gameState.pet.hunger + food.hunger);
            if (food.happiness) gameState.pet.happiness = Math.min(100, gameState.pet.happiness + (food.happiness || 0));
            if (food.health) gameState.pet.health = Math.min(100, gameState.pet.health + (food.health || 0));
            if (food.energy) gameState.pet.energy = Math.min(100, gameState.pet.energy + (food.energy || 0));
            
            addEvent(`${gameState.pet.name} —Å—ä–µ–ª(–∞) ${food.name.toLowerCase()} –Ω–∞ –∫—É—Ö–Ω–µ`);
            showMessage(`–í–∫—É—Å–Ω—ã–π ${food.name.toLowerCase()}! ${food.emoji}`);
            
            // –®–∞–Ω—Å –ø–æ–∫–∞–∫–∞—Ç—å –ø–æ—Å–ª–µ –µ–¥—ã
            if (Math.random() < 0.3) {
                setTimeout(() => makePoop(), 3000);
            }
            
            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –µ–¥—ã
            setTimeout(() => {
                petContainer.classList.remove('eating');
                gameState.pet.isEating = false;
                updatePetImage();
            }, 2000);
            
            closeFoodMenu();
            updateGameDisplay();
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –°–ù–ê (–°–ü–ê–õ–¨–ù–Ø)
        // ============================
        function toggleSleep() {
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Å–ø–∞–ª—å–Ω—é
            switchRoom('bedroom');
            
            gameState.pet.isSleeping = !gameState.pet.isSleeping;
            
            if (gameState.pet.isSleeping) {
                // –ó–∞—Å—ã–ø–∞–Ω–∏–µ
                const currentRoom = document.querySelector('.active-room');
                const petContainer = currentRoom.querySelector('.pet-container');
                
                petContainer.classList.remove('playing', 'eating', 'bathing');
                petContainer.classList.add('sleeping');
                
                // –°–æ–∑–¥–∞–µ–º ZZZ –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π
                const zzzElement = document.createElement('div');
                zzzElement.className = 'zzz';
                zzzElement.textContent = 'Zzz';
                petContainer.appendChild(zzzElement);
                
                addEvent(`${gameState.pet.name} —É—Å–Ω—É–ª(–∞) –≤ —Å–ø–∞–ª—å–Ω–µ`);
                showMessage(`${petData.name} —Å–ª–∞–¥–∫–æ —Å–ø–∏—Ç... üí§`);
                
                // –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –≤–æ —Å–Ω–µ
                gameState.pet.energy = Math.min(100, gameState.pet.energy + 25);
                gameState.pet.health = Math.min(100, gameState.pet.health + 15);
                
            } else {
                // –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ
                const currentRoom = document.querySelector('.active-room');
                const petContainer = currentRoom.querySelector('.pet-container');
                
                petContainer.classList.remove('sleeping');
                
                // –£–¥–∞–ª—è–µ–º ZZZ
                const zzz = petContainer.querySelector('.zzz');
                if (zzz) zzz.remove();
                
                showMessage(`${petData.name} –ø—Ä–æ—Å–Ω—É–ª—Å—è(–∞—Å—å)! –ü–æ–ª–æ–Ω(–Ω–∞) —ç–Ω–µ—Ä–≥–∏–∏! üåÖ`);
            }
            
            updateGameDisplay();
        }

        // ============================
        // –ò–ì–†–ê (–ì–û–°–¢–ò–ù–ê–Ø –ò –î–í–û–†)
        // ============================
        function playWithPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ, —á—Ç–æ–±—ã –ø–æ–∏–≥—Ä–∞—Ç—å.');
                return;
            }
            
            if (gameState.pet.energy < 10) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª –¥–ª—è –∏–≥—Ä.');
                return;
            }
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ–º –∫–æ–º–Ω–∞—Ç—É –¥–ª—è –∏–≥—Ä—ã
            const playRoom = Math.random() > 0.5 ? 'living-room' : 'yard';
            switchRoom(playRoom);
            
            const currentRoom = document.querySelector('.active-room');
            const petContainer = currentRoom.querySelector('.pet-container');
            
            petContainer.classList.remove('sleeping', 'eating', 'bathing');
            petContainer.classList.add('playing');
            
            gameState.pet.isPlaying = true;
            updatePetImage();
            
            const petData = petsData.find(p => p.id === gameState.pet.type);
            const roomName = playRoom === 'living-room' ? '–≤ –≥–æ—Å—Ç–∏–Ω–æ–π' : '–≤–æ –¥–≤–æ—Ä–µ';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 25);
            gameState.pet.energy = Math.max(0, gameState.pet.energy - 15);
            gameState.pet.hunger = Math.max(0, gameState.pet.hunger - 8);
            
            addEvent(`–í—ã –ø–æ–∏–≥—Ä–∞–ª–∏ —Å ${gameState.pet.name} ${roomName}`);
            showMessage(`${petData.name} –≤–µ—Å–µ–ª–æ –∏–≥—Ä–∞–µ—Ç ${roomName}! üéÆ`);
            
            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–≥—Ä—ã
            setTimeout(() => {
                petContainer.classList.remove('playing');
                gameState.pet.isPlaying = false;
                updatePetImage();
                
                // –®–∞–Ω—Å –ø–æ–∫–∞–∫–∞—Ç—å –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã
                if (Math.random() < 0.3) {
                    setTimeout(() => makePoop(), 1000);
                }
            }, 3000);
            
            updateGameDisplay();
        }

        // ============================
        // –í–ê–ù–ù–ê–Ø –ö–û–ú–ù–ê–¢–ê
        // ============================
        function cleanPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º—ã—Ç—å.');
                return;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –≤–∞–Ω–Ω—É—é
            switchRoom('bathroom');
            
            const currentRoom = document.querySelector('.active-room');
            const petContainer = currentRoom.querySelector('.pet-container');
            
            petContainer.classList.remove('sleeping', 'eating', 'playing');
            petContainer.classList.add('bathing');
            
            gameState.pet.isBathing = true;
            gameState.pet.hygiene = 100;
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 15);
            
            addEvent(`–í—ã –ø–æ–º—ã–ª–∏ ${gameState.pet.name} –≤ –≤–∞–Ω–Ω–æ–π`);
            showMessage('–ß–∏—Å—Ç–æ—Ç–∞ - –∑–∞–ª–æ–≥ –∑–¥–æ—Ä–æ–≤—å—è! –¢–µ–ø–µ—Ä—å —è –±–ª–µ—â—É! üõÅ');
            
            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –º—ã—Ç—å—è
            setTimeout(() => {
                petContainer.classList.remove('bathing');
                gameState.pet.isBathing = false;
                updatePetImage();
            }, 2000);
            
            updateGameDisplay();
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –¢–£–ê–õ–ï–¢–ê –ò –ö–ê–ö–ê–®–ï–ö
        // ============================
        function useToilet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ.');
                return;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –≤–∞–Ω–Ω—É—é
            switchRoom('bathroom');
            
            const currentRoom = document.querySelector('.active-room');
            const petContainer = currentRoom.querySelector('.pet-container');
            
            // –®–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—É–∞–ª–µ—Ç–∞
            if (Math.random() < 0.9) {
                setTimeout(() => {
                    showMessage('–£—Å–ø–µ—à–Ω–æ —Å—Ö–æ–¥–∏–ª –≤ —Ç—É–∞–ª–µ—Ç! ‚úÖ');
                    gameState.pet.hygiene = Math.min(100, gameState.pet.hygiene + 20);
                    gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 10);
                    updateGameDisplay();
                }, 1500);
            } else {
                // –ù–µ —É—Å–ø–µ–ª - —Å–¥–µ–ª–∞–ª –ª—É–∂—É
                setTimeout(() => {
                    showMessage('–û–π... –ù–µ —É—Å–ø–µ–ª –¥–æ —Ç—É–∞–ª–µ—Ç–∞... üí©');
                    makePoop();
                }, 1500);
            }
        }

        function makePoop() {
            const now = Date.now();
            if (now - gameState.lastPoopTime < 30000) return; // –ù–µ —á–∞—â–µ —á–µ–º —Ä–∞–∑ –≤ 30 —Å–µ–∫
            
            gameState.lastPoopTime = now;
            
            // –¢–µ–∫—É—â–∞—è –∫–æ–º–Ω–∞—Ç–∞
            const currentRoom = document.querySelector('.active-room');
            
            // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ
            const x = Math.random() * 70 + 15; // 15-85%
            
            const poop = {
                id: Date.now(),
                x: x,
                room: gameState.pet.currentRoom,
                createdAt: now
            };
            
            gameState.poops.push(poop);
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞–∫–∞—à–∫–∏ —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ
            const poopElement = document.createElement('div');
            poopElement.className = 'poop';
            poopElement.dataset.id = poop.id;
            poopElement.textContent = 'üí©';
            poopElement.style.left = `${poop.x}%`;
            
            currentRoom.appendChild(poopElement);
            
            // –£—Ö—É–¥—à–µ–Ω–∏–µ –≥–∏–≥–∏–µ–Ω—ã
            gameState.pet.hygiene = Math.max(0, gameState.pet.hygiene - 25);
            
            addEvent(`${gameState.pet.name} –Ω–∞–¥–µ–ª–∞–ª(–∞) –∫—É—á–∫—É –≤ ${getRoomName(gameState.pet.currentRoom)}`);
            showMessage('–û–π, –∫–∞–∫–∞—è –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç—å! üí©');
            
            updateGameDisplay();
        }

        function getRoomName(roomId) {
            const roomNames = {
                'living-room': '–≥–æ—Å—Ç–∏–Ω–æ–π',
                'kitchen': '–∫—É—Ö–Ω–µ',
                'bedroom': '—Å–ø–∞–ª—å–Ω–µ',
                'bathroom': '–≤–∞–Ω–Ω–æ–π',
                'yard': '–¥–≤–æ—Ä–µ'
            };
            
            return roomNames[roomId] || '–∫–æ–º–Ω–∞—Ç–µ';
        }

        function cleanPoop() {
            if (gameState.poops.length === 0) return;
            
            // –£–¥–∞–ª—è–µ–º –∫–∞–∫–∞—à–∫–∏ —Ç–æ–ª—å–∫–æ –∏–∑ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã
            const currentRoom = gameState.pet.currentRoom;
            const poopsInRoom = gameState.poops.filter(poop => poop.room === currentRoom);
            
            // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–∞–∫–∞—à–µ–∫ –∏–∑ DOM
            document.querySelectorAll('.poop').forEach(poop => {
                poop.remove();
            });
            
            // –£–¥–∞–ª—è–µ–º –∫–∞–∫–∞—à–∫–∏ –∏–∑ –º–∞—Å—Å–∏–≤–∞
            gameState.poops = gameState.poops.filter(poop => poop.room !== currentRoom);
            
            // –£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —á–∏—Å—Ç–æ—Ç—ã
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 15);
            gameState.pet.hygiene = Math.min(100, gameState.pet.hygiene + 10);
            
            addEvent(`–í—ã —É–±—Ä–∞–ª–∏ –∫–∞–∫–∞—à–∫–∏ –≤ ${getRoomName(currentRoom)}`);
            showMessage('–°–ø–∞—Å–∏–±–æ –∑–∞ —É–±–æ—Ä–∫—É! –¢–µ–ø–µ—Ä—å —á–∏—Å—Ç–æ! üßπ');
            
            updateGameDisplay();
        }

        // ============================
        // –î–†–£–ì–ò–ï –î–ï–ô–°–¢–í–ò–Ø
        // ============================
        function healPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ, —á—Ç–æ–±—ã –ø–æ–¥–ª–µ—á–∏—Ç—å.');
                return;
            }
            
            gameState.pet.health = Math.min(100, gameState.pet.health + 35);
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 10);
            
            addEvent(`–í—ã –ø–æ–¥–ª–µ—á–∏–ª–∏ ${gameState.pet.name}`);
            showMessage('–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –∑–∞–±–æ—Ç–∏—à—å—Å—è –æ –º–æ–µ–º –∑–¥–æ—Ä–æ–≤—å–µ! üíä');
            
            updateGameDisplay();
        }

        function walkWithPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ –¥–ª—è –ø—Ä–æ–≥—É–ª–∫–∏.');
                return;
            }
            
            if (gameState.pet.energy < 20) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª –¥–ª—è –ø—Ä–æ–≥—É–ª–∫–∏.');
                return;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤–æ –¥–≤–æ—Ä
            switchRoom('yard');
            
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 20);
            gameState.pet.energy = Math.max(0, gameState.pet.energy - 25);
            gameState.pet.hunger = Math.max(0, gameState.pet.hunger - 15);
            gameState.pet.health = Math.min(100, gameState.pet.health + 10);
            
            addEvent(`–í—ã –ø–æ–≥—É–ª—è–ª–∏ —Å ${gameState.pet.name} –≤–æ –¥–≤–æ—Ä–µ`);
            showMessage('–ü—Ä–æ–≥—É–ª–∫–∞ –≤–æ –¥–≤–æ—Ä–µ –±—ã–ª–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π! üå≥');
            
            // –®–∞–Ω—Å –ø–æ–∫–∞–∫–∞—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ–≥—É–ª–∫–∏
            if (Math.random() < 0.4) {
                setTimeout(() => makePoop(), 2000);
            }
            
            updateGameDisplay();
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –£–•–£–î–®–ï–ù–ò–Ø –ü–û–ö–ê–ó–ê–¢–ï–õ–ï–ô
        // ============================
        function degradeStats() {
            if (gameState.pet.type === '') return;
            
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –ë–∞–∑–æ–≤—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —É—Ö—É–¥—à–µ–Ω–∏—è
            let hungerRate = 0.3;
            let happinessRate = 0.2;
            let energyRate = 0.4;
            let hygieneRate = 0.1;
            
            // –°–ø—è—â–∏–π –ø–∏—Ç–æ–º–µ—Ü –º–µ–Ω—å—à–µ —Ç–µ—Ä—è–µ—Ç
            if (gameState.pet.isSleeping) {
                hungerRate *= 0.2;
                happinessRate *= 0.1;
                energyRate = -3; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é –≤–æ —Å–Ω–µ
                hygieneRate *= 0.5;
            }
            
            // –ù–∞ —É–ª–∏—Ü–µ –±–æ–ª—å—à–µ —Ç—Ä–∞—Ç–∏—Ç—Å—è —ç–Ω–µ—Ä–≥–∏–∏
            if (gameState.pet.currentRoom === 'yard') {
                energyRate *= 1.5;
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
            gameState.pet.hunger = Math.max(0, gameState.pet.hunger - hungerRate);
            gameState.pet.happiness = Math.max(0, gameState.pet.happiness - happinessRate);
            gameState.pet.energy = Math.max(0, Math.min(100, gameState.pet.energy - energyRate));
            gameState.pet.hygiene = Math.max(0, gameState.pet.hygiene - hygieneRate);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–∏—Ç–æ–º—Ü–∞
            if (!gameState.pet.isSleeping) {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–∫–∞—à–µ–∫
                if (Math.random() < 0.001 && gameState.poops.length < 3) {
                    makePoop();
                }
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ –∫–æ–º–Ω–∞—Ç—ã
                if (Math.random() < 0.01 && !gameState.pet.isEating && !gameState.pet.isPlaying && !gameState.pet.isBathing) {
                    const rooms = ['living-room', 'kitchen', 'bedroom', 'bathroom', 'yard'];
                    const randomRoom = rooms[Math.floor(Math.random() * rooms.length)];
                    
                    if (randomRoom !== gameState.pet.currentRoom) {
                        switchRoom(randomRoom);
                        addEvent(`${gameState.pet.name} –ø–µ—Ä–µ—à–µ–ª(–ª–∞) –≤ ${getRoomName(randomRoom)}`);
                    }
                }
            }
            
            // –í–æ–∑—Ä–∞—Å—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
            if (Math.random() < 0.0005) {
                gameState.pet.age += 1;
                if (gameState.pet.age % 7 === 0) {
                    addEvent(`–ü—Ä–æ—à–ª–∞ –Ω–µ–¥–µ–ª—è! ${gameState.pet.name} —Ä–∞—Å—Ç–µ—Ç!`);
                }
            }
            
            // –ó–¥–æ—Ä–æ–≤—å–µ —É—Ö—É–¥—à–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–ª–æ—Ö–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö
            if (gameState.pet.hunger < 20 || gameState.pet.hygiene < 20 || gameState.pet.happiness < 20) {
                gameState.pet.health = Math.max(0, gameState.pet.health - 0.2);
            }
            
            updateGameDisplay();
        }

        function checkPetCondition() {
            // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            if (gameState.pet.health < 10) {
                showMessage('‚ö†Ô∏è –°–†–û–ß–ù–û! –ü–∏—Ç–æ–º–µ—Ü —Å–µ—Ä—å–µ–∑–Ω–æ –±–æ–ª–µ–Ω! –ù—É–∂–Ω–æ –∫ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä—É!');
            } else if (gameState.pet.hunger < 10) {
                showMessage('üçΩÔ∏è –ü–ò–¢–û–ú–ï–¶ –ì–û–õ–û–î–ê–ï–¢! –°—Ä–æ—á–Ω–æ –ø–æ–∫–æ—Ä–º–∏—Ç–µ!');
            } else if (gameState.pet.hygiene < 10) {
                showMessage('ü§¢ –ü–∏—Ç–æ–º–µ—Ü –≤ –∞–Ω—Ç–∏—Å–∞–Ω–∏—Ç–∞—Ä–∏–∏! –°—Ä–æ—á–Ω–æ –ø–æ–º–æ–π—Ç–µ!');
            }
        }

        // ============================
        // –°–û–û–ë–©–ï–ù–ò–Ø –ò –°–û–ë–´–¢–ò–Ø
        // ============================
        function showMessage(text) {
            messageElement.textContent = text;
            messageElement.style.animation = 'none';
            setTimeout(() => {
                messageElement.style.animation = 'fadeIn 0.3s';
            }, 10);
        }

        function addEvent(text) {
            const now = new Date();
            const time = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            const eventItem = document.createElement('div');
            eventItem.className = 'event-item';
            eventItem.textContent = `[${time}] ${text}`;
            
            eventsLog.prepend(eventItem);
            gameState.messages.unshift(`[${time}] ${text}`);
            
            // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
            if (eventsLog.children.length > 10) {
                eventsLog.removeChild(eventsLog.lastChild);
            }
        }

        // ============================
        // –°–û–•–†–ê–ù–ï–ù–ò–ï –ò –ó–ê–ì–†–£–ó–ö–ê
        // ============================
        function saveGame() {
            const saveData = {
                type: gameState.pet.type,
                pet: gameState.pet,
                poops: gameState.poops,
                messages: gameState.messages.slice(0, 10),
                lastUpdate: Date.now()
            };
            localStorage.setItem('tamagotchi_house', JSON.stringify(saveData));
        }

        function loadGame() {
            const saved = localStorage.getItem('tamagotchi_house');
            if (saved) {
                const saveData = JSON.parse(saved);
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–æ—Ç –∂–µ –ø–∏—Ç–æ–º–µ—Ü
                if (saveData.type === gameState.pet.type) {
                    const timePassed = Date.now() - saveData.lastUpdate;
                    const minutesPassed = Math.floor(timePassed / (1000 * 60));
                    
                    gameState.pet = {...saveData.pet};
                    gameState.poops = saveData.poops || [];
                    gameState.messages = saveData.messages || [];
                    
                    // –£—Ö—É–¥—à–µ–Ω–∏–µ –∑–∞ –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è
                    if (minutesPassed > 0) {
                        const degradeMinutes = Math.min(minutesPassed, 180);
                        
                        gameState.pet.hunger = Math.max(0, gameState.pet.hunger - degradeMinutes * 0.2);
                        gameState.pet.happiness = Math.max(0, gameState.pet.happiness - degradeMinutes * 0.15);
                        gameState.pet.energy = Math.max(0, gameState.pet.energy - degradeMinutes * 0.3);
                        gameState.pet.hygiene = Math.max(0, gameState.pet.hygiene - degradeMinutes * 0.08);
                        
                        // –ö–∞–∫–∞—à–∫–∏ –∑–∞ –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è
                        const additionalPoops = Math.floor(minutesPassed / 30);
                        for (let i = 0; i < Math.min(additionalPoops, 3); i++) {
                            setTimeout(() => makePoop(), i * 500);
                        }
                    }
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞ —Å–æ–±—ã—Ç–∏–π
                    eventsLog.innerHTML = '';
                    gameState.messages.forEach(msg => {
                        const eventItem = document.createElement('div');
                        eventItem.className = 'event-item';
                        eventItem.textContent = msg;
                        eventsLog.appendChild(eventItem);
                    });
                    
                    showMessage('–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º –≤ –≤–∞—à –¥–æ–º!');
                    addEvent('–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –∏–≥—Ä—É');
                }
            }
        }

        // ============================
        // –í–û–ó–í–†–ê–¢ –ö –í–´–ë–û–†–£
        // ============================
        function goBackToSelection() {
            if (confirm('–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É –ø–∏—Ç–æ–º—Ü–∞? –¢–µ–∫—É—â–∏–π –ø–∏—Ç–æ–º–µ—Ü –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω.')) {
                saveGame();
                
                gameScreen.style.display = 'none';
                selectionScreen.style.display = 'block';
                
                gameState.selectedPet = null;
                startButton.disabled = true;
                startButton.innerHTML = '<i class="fas fa-play-circle"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É';
                
                document.querySelectorAll('.pet-option').forEach(el => {
                    el.classList.remove('selected');
                });
            }
        }

        // ============================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´
        // ============================
        function initGame() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ –ø–∏—Ç–æ–º—Ü–∞
            initPetSelection();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞
            startButton.addEventListener('click', startGame);
            backButton.addEventListener('click', goBackToSelection);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç
            roomButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const roomId = btn.dataset.room;
                    switchRoom(roomId);
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
            document.getElementById('feed-btn').addEventListener('click', openFoodMenu);
            document.getElementById('play-btn').addEventListener('click', playWithPet);
            document.getElementById('sleep-btn').addEventListener('click', toggleSleep);
            document.getElementById('clean-btn').addEventListener('click', cleanPet);
            document.getElementById('heal-btn').addEventListener('click', healPet);
            document.getElementById('toilet-btn').addEventListener('click', useToilet);
            document.getElementById('clean-poop-btn').addEventListener('click', cleanPoop);
            document.getElementById('walk-btn').addEventListener('click', walkWithPet);
            document.getElementById('close-food-btn').addEventListener('click', closeFoodMenu);
            
            // –°–∏—Å—Ç–µ–º–∞ —É—Ö—É–¥—à–µ–Ω–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
            setInterval(degradeStats, 30000);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            setInterval(() => {
                if (!gameState.pet.isSleeping && Math.random() < 0.15) {
                    const roomMessages = {
                        'living-room': ['–í–∫–ª—é—á–∏ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä! üì∫', '–ü–æ–∏–≥—Ä–∞–π —Å–æ –º–Ω–æ–π –≤ –≥–æ—Å—Ç–∏–Ω–æ–π!', '–ú—è–≥–∫–∏–π –¥–∏–≤–∞–Ω...'],
                        'kitchen': ['–ü–∞—Ö–Ω–µ—Ç –≤–∫—É—Å–Ω–µ–Ω—å–∫–∏–º! üëÉ', '–•–æ—á—É –ø–µ—Ä–µ–∫—É—Å–∏—Ç—å!', '–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ —á—Ç–æ-—Ç–æ –≥—É–¥–∏—Ç'],
                        'bedroom': ['–ö–∞–∫–æ–π —É—é—Ç–Ω—ã–π –¥–æ–º! üè†', '–ú—è–≥–∫–∞—è –∫—Ä–æ–≤–∞—Ç—å...', '–•–æ—á—É –ø–æ—Å–ø–∞—Ç—å'],
                        'bathroom': ['–í—Ä–µ–º—è –≤–æ–¥–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä! üõÅ', '–ß–∏—Å—Ç–æ—Ç–∞ - —ç—Ç–æ –≤–∞–∂–Ω–æ!', '–ë–ª–µ—Å—Ç—è—â–∏–π –∫—Ä–∞–Ω...'],
                        'yard': ['–°–≤–µ–∂–∏–π –≤–æ–∑–¥—É—Ö! üå≥', '–ü—Ç–∏—á–∫–∏ –ø–æ—é—Ç! üê¶', '–°–æ–ª–Ω—ã—à–∫–æ —Å–≤–µ—Ç–∏—Ç! ‚òÄÔ∏è']
                    };
                    
                    const currentRoom = gameState.pet.currentRoom;
                    const messages = roomMessages[currentRoom] || ['–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —á—Ç–æ –¥–∞–ª—å—à–µ?'];
                    showMessage(messages[Math.floor(Math.random() * messages.length)]);
                }
            }, 20000);
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            window.addEventListener('beforeunload', saveGame);
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
