<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–º–∞–≥–æ—á–∏ - –ñ–∏–≤–æ–π –ø–∏—Ç–æ–º–µ—Ü</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: #6ee7b7;
            text-shadow: 0 2px 10px rgba(110, 231, 183, 0.3);
        }
        
        .game-area {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ */
        .pet-selection {
            text-align: center;
        }
        
        .selection-title {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #fbbf24;
        }
        
        .pets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .pet-option {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }
        
        .pet-option:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.12);
            border-color: #6ee7b7;
        }
        
        .pet-option.selected {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.15);
        }
        
        .pet-icon {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            transition: transform 0.3s;
        }
        
        .pet-option:hover .pet-icon {
            transform: scale(1.1);
        }
        
        .pet-name {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .pet-description {
            font-size: 0.9rem;
            color: #cbd5e1;
            margin-bottom: 15px;
            min-height: 40px;
        }
        
        .start-button {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            border: none;
            padding: 16px 45px;
            font-size: 1.3rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }
        
        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
        }
        
        .start-button:disabled {
            background: #475569;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω */
        .game-screen {
            display: none;
        }
        
        .screen-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .back-button {
            background: #475569;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .back-button:hover {
            background: #64748b;
            transform: translateX(-3px);
        }
        
        .pet-info-bar {
            display: flex;
            gap: 20px;
            align-items: center;
            color: #fbbf24;
            font-size: 1.1rem;
        }
        
        /* –ò–≥—Ä–æ–≤–∞—è —Å—Ü–µ–Ω–∞ */
        .game-scene {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
            min-height: 350px;
        }
        
        .scene-area {
            flex: 2;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .controls-panel {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–∏—Ç–æ–º—Ü–∞ */
        .pet-container {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 150px;
            z-index: 10;
        }
        
        .pet-character {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        .pet-body {
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s;
        }
        
        .pet-face {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            font-size: 2.5rem;
        }
        
        /* –û–±—ä–µ–∫—Ç—ã –Ω–∞ —Å—Ü–µ–Ω–µ */
        .scene-object {
            position: absolute;
            transition: all 0.3s;
        }
        
        .food-bowl {
            bottom: 30px;
            left: 100px;
            width: 60px;
            height: 30px;
            background: #f59e0b;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .water-bowl {
            bottom: 30px;
            right: 100px;
            width: 60px;
            height: 30px;
            background: #3b82f6;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .toilet {
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2.5rem;
        }
        
        .poop {
            position: absolute;
            bottom: 40px;
            font-size: 2rem;
            z-index: 5;
            animation: poopAppear 0.5s ease-out;
        }
        
        @keyframes poopAppear {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .walking {
            animation: walk 1s infinite alternate;
        }
        
        @keyframes walk {
            0% { transform: translateX(-50%) translateY(0); }
            100% { transform: translateX(-50%) translateY(-5px); }
        }
        
        .eating {
            animation: eat 0.5s infinite;
        }
        
        @keyframes eat {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
        }
        
        .drinking {
            animation: drink 0.8s infinite;
        }
        
        @keyframes drink {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
            25% { transform: translate(-50%, -50%) rotate(-5deg); }
            75% { transform: translate(-50%, -50%) rotate(5deg); }
        }
        
        .sleeping {
            animation: sleep 2s infinite;
        }
        
        @keyframes sleep {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .playing {
            animation: play 0.6s infinite alternate;
        }
        
        @keyframes play {
            0% { transform: translate(-50%, -50%) rotate(-10deg); }
            100% { transform: translate(-50%, -50%) rotate(10deg); }
        }
        
        .cleaning {
            animation: clean 1s infinite;
        }
        
        @keyframes clean {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }
        
        /* –ü–æ–ª–æ—Å–∫–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π */
        .stats {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stat {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 10px;
        }
        
        .stat-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .bar-container {
            height: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .bar {
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s;
        }
        
        .hunger-bar { background: #ef4444; }
        .happiness-bar { background: #fbbf24; }
        .energy-bar { background: #3b82f6; }
        .health-bar { background: #10b981; }
        .hygiene-bar { background: #8b5cf6; }
        
        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .action-btn {
            background: #4f46e5;
            color: white;
            border: none;
            padding: 12px 8px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            transition: all 0.2s;
            font-size: 0.85rem;
        }
        
        .action-btn:hover {
            background: #4338ca;
            transform: translateY(-2px);
        }
        
        .action-btn:disabled {
            background: #475569;
            cursor: not-allowed;
            transform: none;
        }
        
        .action-btn i {
            font-size: 1.2rem;
        }
        
        /* –°–æ–æ–±—â–µ–Ω–∏—è –∏ —Å–æ–±—ã—Ç–∏—è */
        .message-box {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .events-log {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            max-height: 100px;
            overflow-y: auto;
            font-size: 0.85rem;
        }
        
        .event-item {
            margin-bottom: 5px;
            padding: 3px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* –ü–æ–¥—Å–∫–∞–∑–∫–∏ */
        .hint {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            z-index: 100;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 900px) {
            .game-scene {
                flex-direction: column;
            }
            
            .scene-area {
                min-height: 300px;
            }
        }
        
        @media (max-width: 600px) {
            .pets-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
        
        @media (max-width: 480px) {
            .pets-grid {
                grid-template-columns: 1fr;
            }
            
            .screen-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .pet-info-bar {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –ø–∏—Ç–æ–º—Ü–∞ -->
        <div class="pet-selection" id="selection-screen">
            <header>
                <h1><i class="fas fa-paw"></i> –ñ–∏–≤–æ–π –¢–∞–º–∞–≥–æ—á–∏</h1>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø–∏—Ç–æ–º—Ü–∞ –∏ –∑–∞–±–æ—Ç—å—Ç–µ—Å—å –æ –Ω–µ–º!</p>
            </header>
            
            <div class="game-area">
                <h2 class="selection-title">–ö—Ç–æ –±—É–¥–µ—Ç –≤–∞—à–∏–º –¥—Ä—É–≥–æ–º?</h2>
                
                <div class="pets-grid" id="pets-container">
                    <!-- –ü–∏—Ç–æ–º—Ü—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                
                <button class="start-button" id="start-button" disabled>
                    <i class="fas fa-play-circle"></i> –ù–∞—á–∞—Ç—å –∑–∞–±–æ—Ç—É
                </button>
            </div>
            
            <footer style="text-align: center; margin-top: 30px; color: #94a3b8; font-size: 0.9rem;">
                <p>–ö–∞–∂–¥—ã–π –ø–∏—Ç–æ–º–µ—Ü –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏!</p>
            </footer>
        </div>
        
        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div class="game-screen" id="game-screen">
            <div class="screen-header">
                <button class="back-button" id="back-button">
                    <i class="fas fa-arrow-left"></i>
                    –î—Ä—É–≥–æ–π –ø–∏—Ç–æ–º–µ—Ü
                </button>
                
                <div class="pet-info-bar">
                    <div><i class="fas fa-user"></i> <span id="pet-name-display">–ü–∏—Ç–æ–º–µ—Ü</span></div>
                    <div><i class="fas fa-birthday-cake"></i> –í–æ–∑—Ä–∞—Å—Ç: <span id="pet-age">0</span> –¥–Ω–µ–π</div>
                    <div><i class="fas fa-star"></i> –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: <span id="pet-mood">–°—á–∞—Å—Ç–ª–∏–≤</span></div>
                </div>
            </div>
            
            <div class="game-area">
                <div class="game-scene">
                    <!-- –ò–≥—Ä–æ–≤–∞—è —Å—Ü–µ–Ω–∞ -->
                    <div class="scene-area" id="scene-area">
                        <!-- –ü–∏—Ç–æ–º–µ—Ü -->
                        <div class="pet-container" id="pet-container">
                            <div class="pet-character">
                                <div class="pet-body" id="pet-body"></div>
                                <div class="pet-face" id="pet-face">üê∂</div>
                            </div>
                        </div>
                        
                        <!-- –û–±—ä–µ–∫—Ç—ã –Ω–∞ —Å—Ü–µ–Ω–µ -->
                        <div class="scene-object food-bowl" id="food-bowl">
                            <i class="fas fa-utensils"></i>
                        </div>
                        
                        <div class="scene-object water-bowl" id="water-bowl">
                            <i class="fas fa-tint"></i>
                        </div>
                        
                        <div class="scene-object toilet" id="toilet">
                            <i class="fas fa-toilet"></i>
                        </div>
                        
                        <!-- –ö–∞–∫–∞—à–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    
                    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                    <div class="controls-panel">
                        <div class="stats">
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-utensils"></i> –ì–æ–ª–æ–¥</span>
                                    <span id="hunger-value">80%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar hunger-bar" id="hunger-bar" style="width: 80%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-smile"></i> –°—á–∞—Å—Ç—å–µ</span>
                                    <span id="happiness-value">90%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar happiness-bar" id="happiness-bar" style="width: 90%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-bolt"></i> –≠–Ω–µ—Ä–≥–∏—è</span>
                                    <span id="energy-value">75%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar energy-bar" id="energy-bar" style="width: 75%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-heart"></i> –ó–¥–æ—Ä–æ–≤—å–µ</span>
                                    <span id="health-value">95%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar health-bar" id="health-bar" style="width: 95%"></div>
                                </div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-info">
                                    <span><i class="fas fa-shower"></i> –ß–∏—Å—Ç–æ—Ç–∞</span>
                                    <span id="hygiene-value">100%</span>
                                </div>
                                <div class="bar-container">
                                    <div class="bar hygiene-bar" id="hygiene-bar" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="controls-grid">
                            <button class="action-btn" id="feed-btn">
                                <i class="fas fa-apple-alt"></i>
                                <span>–ü–æ–∫–æ—Ä–º–∏—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="water-btn">
                                <i class="fas fa-tint"></i>
                                <span>–ù–∞–ø–æ–∏—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="play-btn">
                                <i class="fas fa-gamepad"></i>
                                <span>–ü–æ–∏–≥—Ä–∞—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="sleep-btn">
                                <i class="fas fa-bed"></i>
                                <span>–°–ø–∞—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="clean-btn">
                                <i class="fas fa-shower"></i>
                                <span>–ü–æ–º—ã—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="heal-btn">
                                <i class="fas fa-first-aid"></i>
                                <span>–õ–µ—á–∏—Ç—å</span>
                            </button>
                            
                            <button class="action-btn" id="toilet-btn">
                                <i class="fas fa-toilet"></i>
                                <span>–í —Ç—É–∞–ª–µ—Ç</span>
                            </button>
                            
                            <button class="action-btn" id="clean-poop-btn">
                                <i class="fas fa-poop"></i>
                                <span>–£–±—Ä–∞—Ç—å</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="message-box" id="message">
                    –í–∞—à –ø–∏—Ç–æ–º–µ—Ü –∂–¥–µ—Ç –≤–∞—à–µ–π –∑–∞–±–æ—Ç—ã!
                </div>
                
                <div class="events-log" id="events-log">
                    <div class="event-item">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================
        // –î–ê–ù–ù–´–ï –ü–ò–¢–û–ú–¶–ï–í
        // ============================
        const petsData = [
            {
                id: 'dog',
                name: '–°–æ–±–∞—á–∫–∞',
                emoji: 'üê∂',
                color: '#f59e0b',
                description: '–ê–∫—Ç–∏–≤–Ω—ã–π –∏ –≤–µ—Ä–Ω—ã–π, –ª—é–±–∏—Ç –∏–≥—Ä–∞—Ç—å –∏ –±–µ–≥–∞—Ç—å',
                special: '–ù—É–∂–¥–∞–µ—Ç—Å—è –≤ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–≥—É–ª–∫–∞—Ö',
                speed: 1.2,
                hungerRate: 1.1
            },
            {
                id: 'cat',
                name: '–ö–æ—Ç–∏–∫',
                emoji: 'üê±',
                color: '#6b7280',
                description: '–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∏ –≥—Ä–∞—Ü–∏–æ–∑–Ω—ã–π, –ª—é–±–∏—Ç —Å–ø–∞—Ç—å',
                special: '–ß–∞—Å—Ç–æ —É–º—ã–≤–∞–µ—Ç—Å—è —Å–∞–º',
                speed: 0.8,
                hungerRate: 0.9
            },
            {
                id: 'rabbit',
                name: '–ö—Ä–æ–ª–∏–∫',
                emoji: 'üê∞',
                color: '#ef4444',
                description: '–ü—É—à–∏—Å—Ç—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π, –ª—é–±–∏—Ç –ø—Ä—ã–≥–∞—Ç—å',
                special: '–ë—ã—Å—Ç—Ä–æ —Ä–∞–∑–º–Ω–æ–∂–∞–µ—Ç –∫–∞–∫–∞—à–∫–∏',
                speed: 1.5,
                hungerRate: 1.3
            },
            {
                id: 'hamster',
                name: '–•–æ–º—è–∫',
                emoji: 'üêπ',
                color: '#fbbf24',
                description: '–ú–∞–ª–µ–Ω—å–∫–∏–π –∏ —à—É—Å—Ç—Ä—ã–π, –ª—é–±–∏—Ç –∫–æ–ª–µ—Å–æ',
                special: '–û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ –±–µ–≥–∞–µ—Ç',
                speed: 2.0,
                hungerRate: 1.2
            },
            {
                id: 'fox',
                name: '–õ–∏—Å–∏—á–∫–∞',
                emoji: 'ü¶ä',
                color: '#ea580c',
                description: '–•–∏—Ç—Ä–∞—è –∏ –∏–≥—Ä–∏–≤–∞—è, –ª—é–±–∏—Ç –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è',
                special: '–ß–∞—Å—Ç–æ –∏–≥—Ä–∞–µ—Ç —Å–∞–º–∞ —Å —Å–æ–±–æ–π',
                speed: 1.3,
                hungerRate: 1.0
            },
            {
                id: 'penguin',
                name: '–ü–∏–Ω–≥–≤–∏–Ω',
                emoji: 'üêß',
                color: '#1e293b',
                description: '–ú–∏–ª–∞—è –Ω–µ—É–∫–ª—é–∂–∞—è –ø—Ç–∏—á–∫–∞, –ª—é–±–∏—Ç —Ö–æ–ª–æ–¥',
                special: '–ú–µ–¥–ª–µ–Ω–Ω–æ —Ö–æ–¥–∏—Ç, –Ω–æ –±—ã—Å—Ç—Ä–æ –ø–ª–∞–≤–∞–µ—Ç',
                speed: 0.7,
                hungerRate: 1.1
            }
        ];

        // ============================
        // –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´
        // ============================
        let gameState = {
            selectedPet: null,
            pet: {
                type: '',
                name: '',
                hunger: 80,
                happiness: 90,
                energy: 75,
                health: 95,
                hygiene: 100,
                age: 0,
                isSleeping: false,
                isEating: false,
                isDrinking: false,
                isPlaying: false,
                isCleaning: false,
                isPooping: false,
                position: 'center',
                mood: 'happy'
            },
            poops: [],
            lastPoopTime: 0,
            messages: ['–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!']
        };

        // ============================
        // –≠–õ–ï–ú–ï–ù–¢–´ –î–û–ú
        // ============================
        const selectionScreen = document.getElementById('selection-screen');
        const gameScreen = document.getElementById('game-screen');
        const petsContainer = document.getElementById('pets-container');
        const startButton = document.getElementById('start-button');
        const backButton = document.getElementById('back-button');
        const sceneArea = document.getElementById('scene-area');
        const petContainer = document.getElementById('pet-container');
        const petBody = document.getElementById('pet-body');
        const petFace = document.getElementById('pet-face');
        const messageElement = document.getElementById('message');
        const eventsLog = document.getElementById('events-log');

        // ============================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –í–´–ë–û–†–ê –ü–ò–¢–û–ú–¶–ê
        // ============================
        function initPetSelection() {
            petsContainer.innerHTML = '';
            
            petsData.forEach(pet => {
                const petElement = document.createElement('div');
                petElement.className = 'pet-option';
                petElement.dataset.id = pet.id;
                
                petElement.innerHTML = `
                    <div class="pet-icon" style="background: ${pet.color}">
                        <span style="font-size: 3.5rem;">${pet.emoji}</span>
                    </div>
                    <div class="pet-name">${pet.name}</div>
                    <div class="pet-description">${pet.description}</div>
                    <div style="color: #6ee7b7; font-size: 0.8rem; margin-top: 10px;">
                        <i class="fas fa-running"></i> –°–∫–æ—Ä–æ—Å—Ç—å: ${pet.speed}x
                    </div>
                    <div style="color: #fbbf24; font-size: 0.8rem;">
                        <i class="fas fa-star"></i> ${pet.special}
                    </div>
                `;
                
                petElement.addEventListener('click', () => selectPet(pet.id));
                petsContainer.appendChild(petElement);
            });
        }

        function selectPet(petId) {
            document.querySelectorAll('.pet-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            const selectedElement = document.querySelector(`[data-id="${petId}"]`);
            selectedElement.classList.add('selected');
            
            gameState.selectedPet = petId;
            startButton.disabled = false;
            
            const petData = petsData.find(p => p.id === petId);
            startButton.innerHTML = `<i class="fas fa-play-circle"></i> –ò–≥—Ä–∞—Ç—å —Å ${petData.name}`;
        }

        // ============================
        // –ó–ê–ü–£–°–ö –ò–ì–†–´
        // ============================
        function startGame() {
            if (!gameState.selectedPet) return;
            
            const petData = petsData.find(p => p.id === gameState.selectedPet);
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            gameState.pet.type = petData.id;
            gameState.pet.name = petData.name;
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
            loadGame();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
            initGameScene();
            updateGameDisplay();
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
            selectionScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            addEvent(`–í—ã –≤—ã–±—Ä–∞–ª–∏ ${petData.name.toLowerCase()}!`);
            showMessage(`–ü—Ä–∏–≤–µ—Ç! –Ø ${petData.name.toLowerCase()}! –ë—É–¥–µ–º –¥—Ä—É–∂–∏—Ç—å!`);
        }

        // ============================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–û–í–û–ô –°–¶–ï–ù–´
        // ============================
        function initGameScene() {
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ –ø–∏—Ç–æ–º—Ü–∞
            petBody.style.background = petData.color;
            petFace.textContent = petData.emoji;
            
            // –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫–∞–∫–∞—à–µ–∫
            document.querySelectorAll('.poop').forEach(poop => poop.remove());
            gameState.poops = [];
            
            // –ù–∞—á–∞–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
            petContainer.classList.add('walking');
        }

        // ============================
        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø
        // ============================
        function updateGameDisplay() {
            // –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            document.getElementById('hunger-bar').style.width = gameState.pet.hunger + '%';
            document.getElementById('happiness-bar').style.width = gameState.pet.happiness + '%';
            document.getElementById('energy-bar').style.width = gameState.pet.energy + '%';
            document.getElementById('health-bar').style.width = gameState.pet.health + '%';
            document.getElementById('hygiene-bar').style.width = gameState.pet.hygiene + '%';
            
            document.getElementById('hunger-value').textContent = Math.round(gameState.pet.hunger) + '%';
            document.getElementById('happiness-value').textContent = Math.round(gameState.pet.happiness) + '%';
            document.getElementById('energy-value').textContent = Math.round(gameState.pet.energy) + '%';
            document.getElementById('health-value').textContent = Math.round(gameState.pet.health) + '%';
            document.getElementById('hygiene-value').textContent = Math.round(gameState.pet.hygiene) + '%';
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∏—Ç–æ–º—Ü–µ
            document.getElementById('pet-name-display').textContent = gameState.pet.name;
            document.getElementById('pet-age').textContent = gameState.pet.age;
            
            // –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
            updateMoodDisplay();
            
            // –ö–Ω–æ–ø–∫–∞ —É–±–æ—Ä–∫–∏
            const cleanPoopBtn = document.getElementById('clean-poop-btn');
            cleanPoopBtn.disabled = gameState.poops.length === 0;
            cleanPoopBtn.innerHTML = `<i class="fas fa-poop"></i><span>–£–±—Ä–∞—Ç—å (${gameState.poops.length})</span>`;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            checkPetCondition();
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            saveGame();
        }

        function updateMoodDisplay() {
            let moodText = '–°—á–∞—Å—Ç–ª–∏–≤';
            let moodEmoji = 'üòä';
            
            if (gameState.pet.isSleeping) {
                moodText = '–°–ø–∏—Ç';
                moodEmoji = 'üò¥';
            } else if (gameState.pet.health < 30) {
                moodText = '–ë–æ–ª–µ–Ω';
                moodEmoji = 'ü§í';
            } else if (gameState.pet.hunger < 30) {
                moodText = '–ì–æ–ª–æ–¥–µ–Ω';
                moodEmoji = 'üçΩÔ∏è';
            } else if (gameState.pet.happiness < 30) {
                moodText = '–ì—Ä—É—Å—Ç–µ–Ω';
                moodEmoji = 'üò¢';
            } else if (gameState.pet.energy < 30) {
                moodText = '–£—Å—Ç–∞–ª';
                moodEmoji = 'üò¥';
            } else if (gameState.pet.hygiene < 50) {
                moodText = '–ì—Ä—è–∑–Ω—ã–π';
                moodEmoji = 'ü§¢';
            } else if (gameState.pet.happiness > 80) {
                moodText = '–û—á–µ–Ω—å —Å—á–∞—Å—Ç–ª–∏–≤';
                moodEmoji = 'üòÑ';
            }
            
            document.getElementById('pet-mood').innerHTML = `${moodEmoji} ${moodText}`;
            gameState.pet.mood = moodText.toLowerCase();
        }

        // ============================
        // –ê–ù–ò–ú–ê–¶–ò–ò –ò –î–í–ò–ñ–ï–ù–ò–Ø
        // ============================
        function movePetTo(target) {
            const petContainer = document.getElementById('pet-container');
            
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            petContainer.classList.remove('walking', 'eating', 'drinking', 'playing', 'sleeping', 'cleaning');
            petBody.classList.remove('eating', 'drinking', 'playing', 'sleeping', 'cleaning');
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é
            let position;
            switch(target) {
                case 'food':
                    position = { left: '25%', bottom: '50px' };
                    petContainer.classList.add('eating');
                    petBody.classList.add('eating');
                    gameState.pet.isEating = true;
                    setTimeout(() => { gameState.pet.isEating = false; }, 2000);
                    break;
                case 'water':
                    position = { left: '75%', bottom: '50px' };
                    petContainer.classList.add('drinking');
                    petBody.classList.add('drinking');
                    gameState.pet.isDrinking = true;
                    setTimeout(() => { gameState.pet.isDrinking = false; }, 2000);
                    break;
                case 'toilet':
                    position = { left: '50%', bottom: '50px' };
                    gameState.pet.isPooping = true;
                    setTimeout(() => { gameState.pet.isPooping = false; }, 1500);
                    break;
                case 'center':
                    position = { left: '50%', bottom: '50px' };
                    petContainer.classList.add('walking');
                    break;
                default:
                    position = { left: '50%', bottom: '50px' };
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
            petContainer.style.transition = 'left 1s ease, bottom 1s ease';
            petContainer.style.left = position.left;
            petContainer.style.bottom = position.bottom;
            
            gameState.pet.position = target;
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ö–æ–¥—å–±—É –ø–æ—Å–ª–µ –¥–≤–∏–∂–µ–Ω–∏—è
            if (target !== 'food' && target !== 'water') {
                setTimeout(() => {
                    if (!gameState.pet.isSleeping && !gameState.pet.isEating && 
                        !gameState.pet.isDrinking && !gameState.pet.isPlaying) {
                        petContainer.classList.add('walking');
                    }
                }, 1000);
            }
        }

        // ============================
        // –î–ï–ô–°–¢–í–ò–Ø –° –ü–ò–¢–û–ú–¶–ï–ú
        // ============================
        function feedPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ.');
                return;
            }
            
            movePetTo('food');
            
            const petData = petsData.find(p => p.id === gameState.pet.type);
            let hungerIncrease = 25;
            
            // –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–∑–Ω—ã—Ö –ø–∏—Ç–æ–º—Ü–µ–≤
            if (gameState.pet.type === 'hamster') hungerIncrease = 20;
            if (gameState.pet.type === 'rabbit') hungerIncrease = 30;
            
            gameState.pet.hunger = Math.min(100, gameState.pet.hunger + hungerIncrease);
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 5);
            
            addEvent(`${gameState.pet.name} –ø–æ–µ–ª(–∞)`);
            showMessage('–ù—è–º-–Ω—è–º! –í–∫—É—Å–Ω–æ! üçé');
            
            // –®–∞–Ω—Å –ø–æ–∫–∞–∫–∞—Ç—å –ø–æ—Å–ª–µ –µ–¥—ã
            if (Math.random() < 0.3) {
                setTimeout(() => makePoop(), 2000);
            }
            
            updateGameDisplay();
        }

        function waterPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ.');
                return;
            }
            
            movePetTo('water');
            
            gameState.pet.energy = Math.min(100, gameState.pet.energy + 10);
            gameState.pet.health = Math.min(100, gameState.pet.health + 5);
            
            addEvent(`${gameState.pet.name} –ø–æ–ø–∏–ª(–∞) –≤–æ–¥—ã`);
            showMessage('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–¥—É! üíß');
            
            updateGameDisplay();
        }

        function playWithPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ.');
                return;
            }
            
            if (gameState.pet.energy < 15) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª –¥–ª—è –∏–≥—Ä.');
                return;
            }
            
            const petContainer = document.getElementById('pet-container');
            petContainer.classList.remove('walking');
            petContainer.classList.add('playing');
            petBody.classList.add('playing');
            
            gameState.pet.isPlaying = true;
            
            let happinessIncrease = 20;
            let energyDecrease = 15;
            
            // –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
            if (gameState.pet.type === 'dog') happinessIncrease = 25;
            if (gameState.pet.type === 'fox') happinessIncrease = 22;
            
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + happinessIncrease);
            gameState.pet.energy = Math.max(0, gameState.pet.energy - energyDecrease);
            gameState.pet.hunger = Math.max(0, gameState.pet.hunger - 8);
            
            addEvent(`–í—ã –ø–æ–∏–≥—Ä–∞–ª–∏ —Å ${gameState.pet.name}`);
            showMessage('–£—Ä–∞! –ò–≥—Ä–∞—Ç—å —Ç–∞–∫ –≤–µ—Å–µ–ª–æ! üéÆ');
            
            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–≥—Ä—ã
            setTimeout(() => {
                petContainer.classList.remove('playing');
                petBody.classList.remove('playing');
                gameState.pet.isPlaying = false;
                petContainer.classList.add('walking');
            }, 3000);
            
            updateGameDisplay();
        }

        function toggleSleep() {
            const petContainer = document.getElementById('pet-container');
            const sleepBtn = document.getElementById('sleep-btn');
            
            gameState.pet.isSleeping = !gameState.pet.isSleeping;
            
            if (gameState.pet.isSleeping) {
                // –ó–∞—Å—ã–ø–∞–Ω–∏–µ
                petContainer.classList.remove('walking', 'playing');
                petContainer.classList.add('sleeping');
                petBody.classList.add('sleeping');
                
                sleepBtn.innerHTML = '<i class="fas fa-sun"></i><span>–†–∞–∑–±—É–¥–∏—Ç—å</span>';
                
                let energyIncrease = 30;
                let healthIncrease = 10;
                
                if (gameState.pet.type === 'cat') energyIncrease = 35;
                
                gameState.pet.energy = Math.min(100, gameState.pet.energy + energyIncrease);
                gameState.pet.health = Math.min(100, gameState.pet.health + healthIncrease);
                
                addEvent(`${gameState.pet.name} —É—Å–Ω—É–ª(–∞)`);
                showMessage('–•—Ä—Ä—Ä—Ä... –°–ø–∏—Ç —Å–ª–∞–¥–∫–æ... üí§');
            } else {
                // –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ
                petContainer.classList.remove('sleeping');
                petBody.classList.remove('sleeping');
                petContainer.classList.add('walking');
                
                sleepBtn.innerHTML = '<i class="fas fa-bed"></i><span>–°–ø–∞—Ç—å</span>';
                showMessage('–Ø –ø—Ä–æ—Å–Ω—É–ª—Å—è! –ü–æ–ª–æ–Ω —Å–∏–ª! üåÖ');
            }
            
            updateGameDisplay();
        }

        function cleanPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ.');
                return;
            }
            
            const petContainer = document.getElementById('pet-container');
            petContainer.classList.remove('walking');
            petContainer.classList.add('cleaning');
            petBody.classList.add('cleaning');
            
            gameState.pet.isCleaning = true;
            gameState.pet.hygiene = 100;
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 10);
            
            addEvent(`–í—ã –ø–æ–º—ã–ª–∏ ${gameState.pet.name}`);
            showMessage('–ß–∏—Å—Ç–æ—Ç–∞ - –∑–∞–ª–æ–≥ –∑–¥–æ—Ä–æ–≤—å—è! üõÅ');
            
            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –º—ã—Ç—å—è
            setTimeout(() => {
                petContainer.classList.remove('cleaning');
                petBody.classList.remove('cleaning');
                gameState.pet.isCleaning = false;
                petContainer.classList.add('walking');
            }, 2000);
            
            updateGameDisplay();
        }

        function healPet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ.');
                return;
            }
            
            gameState.pet.health = Math.min(100, gameState.pet.health + 30);
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 5);
            
            addEvent(`–í—ã –ø–æ–¥–ª–µ—á–∏–ª–∏ ${gameState.pet.name}`);
            showMessage('–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –∑–∞–±–æ—Ç–∏—à—å—Å—è –æ –º–æ–µ–º –∑–¥–æ—Ä–æ–≤—å–µ! üíä');
            
            updateGameDisplay();
        }

        function useToilet() {
            if (gameState.pet.isSleeping) {
                showMessage('–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏—Ç–µ –µ–≥–æ.');
                return;
            }
            
            movePetTo('toilet');
            
            // –®–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—É–∞–ª–µ—Ç–∞
            if (Math.random() < 0.7) {
                setTimeout(() => {
                    showMessage('–£—Å–ø–µ—à–Ω–æ —Å—Ö–æ–¥–∏–ª –≤ —Ç—É–∞–ª–µ—Ç! ‚úÖ');
                    gameState.pet.hygiene = Math.min(100, gameState.pet.hygiene + 10);
                    gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 5);
                    updateGameDisplay();
                }, 1500);
            } else {
                // –ù–µ —É—Å–ø–µ–ª - —Å–¥–µ–ª–∞–ª –ª—É–∂—É
                setTimeout(() => {
                    showMessage('–û–π... –ù–µ —É—Å–ø–µ–ª –¥–æ —Ç—É–∞–ª–µ—Ç–∞... üí©');
                    makePoop();
                }, 1500);
            }
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –ö–ê–ö–ê–®–ï–ö
        // ============================
        function makePoop() {
            const now = Date.now();
            if (now - gameState.lastPoopTime < 30000) return; // –ù–µ —á–∞—â–µ —á–µ–º —Ä–∞–∑ –≤ 30 —Å–µ–∫
            
            gameState.lastPoopTime = now;
            
            // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –Ω–∞ —Å—Ü–µ–Ω–µ
            const x = Math.random() * 70 + 15; // 15-85%
            const y = Math.random() * 30 + 10; // 10-40%
            
            const poop = {
                id: Date.now(),
                x: x,
                y: y,
                createdAt: now
            };
            
            gameState.poops.push(poop);
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞–∫–∞—à–∫–∏
            const poopElement = document.createElement('div');
            poopElement.className = 'poop scene-object';
            poopElement.dataset.id = poop.id;
            poopElement.innerHTML = 'üí©';
            poopElement.style.left = `${poop.x}%`;
            poopElement.style.bottom = `${poop.y}%`;
            
            sceneArea.appendChild(poopElement);
            
            // –£—Ö—É–¥—à–µ–Ω–∏–µ –≥–∏–≥–∏–µ–Ω—ã
            gameState.pet.hygiene = Math.max(0, gameState.pet.hygiene - 15);
            
            addEvent(`${gameState.pet.name} –Ω–∞–¥–µ–ª–∞–ª(–∞) –∫—É—á–∫—É`);
            showMessage('–û–π, –∫–∞–∫–∞—è –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç—å! üí©');
            
            updateGameDisplay();
        }

        function cleanPoop() {
            if (gameState.poops.length === 0) return;
            
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–∞–∫–∞—à–∫–∏
            gameState.poops = [];
            document.querySelectorAll('.poop').forEach(poop => poop.remove());
            
            // –£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —á–∏—Å—Ç–æ—Ç—ã
            gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 10);
            gameState.pet.hygiene = Math.min(100, gameState.pet.hygiene + 5);
            
            addEvent('–í—ã —É–±—Ä–∞–ª–∏ –≤—Å–µ –∫–∞–∫–∞—à–∫–∏');
            showMessage('–°–ø–∞—Å–∏–±–æ –∑–∞ —É–±–æ—Ä–∫—É! –¢–µ–ø–µ—Ä—å —á–∏—Å—Ç–æ! üßπ');
            
            updateGameDisplay();
        }

        // ============================
        // –°–ò–°–¢–ï–ú–ê –£–•–£–î–®–ï–ù–ò–Ø
        // ============================
        function degradeStats() {
            if (gameState.pet.type === '') return;
            
            const petData = petsData.find(p => p.id === gameState.pet.type);
            
            // –ë–∞–∑–æ–≤—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —É—Ö—É–¥—à–µ–Ω–∏—è
            let hungerRate = 0.4;
            let happinessRate = 0.3;
            let energyRate = 0.5;
            let hygieneRate = 0.2;
            
            // –£—á–µ—Ç –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –ø–∏—Ç–æ–º—Ü–∞
            hungerRate *= petData.hungerRate;
            
            // –°–ø—è—â–∏–π –ø–∏—Ç–æ–º–µ—Ü –º–µ–Ω—å—à–µ —Ç–µ—Ä—è–µ—Ç
            if (gameState.pet.isSleeping) {
                hungerRate *= 0.3;
                happinessRate *= 0.2;
                energyRate = -1; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
            gameState.pet.hunger = Math.max(0, gameState.pet.hunger - hungerRate);
            gameState.pet.happiness = Math.max(0, gameState.pet.happiness - happinessRate);
            gameState.pet.energy = Math.max(0, Math.min(100, gameState.pet.energy - energyRate));
            gameState.pet.hygiene = Math.max(0, gameState.pet.hygiene - hygieneRate);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–∏—Ç–æ–º—Ü–∞
            if (!gameState.pet.isSleeping) {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–∫–∞—à–µ–∫
                if (Math.random() < 0.002 && gameState.poops.length < 5) {
                    makePoop();
                }
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–º—ã–≤–∞–Ω–∏–µ (–æ—Å–æ–±–µ–Ω–Ω–æ —É –∫–æ—Ç–∞)
                if (gameState.pet.type === 'cat' && Math.random() < 0.005 && gameState.pet.hygiene < 90) {
                    gameState.pet.hygiene = Math.min(100, gameState.pet.hygiene + 5);
                    addEvent(`${gameState.pet.name} —É–º—ã–ª—Å—è(–∞—Å—å)`);
                }
            }
            
            // –í–æ–∑—Ä–∞—Å—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
            if (Math.random() < 0.001) {
                gameState.pet.age += 1;
                if (gameState.pet.age % 10 === 0) {
                    addEvent(`–° –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! ${gameState.pet.name} –∏—Å–ø–æ–ª–Ω–∏–ª–æ—Å—å ${gameState.pet.age} –¥–Ω–µ–π!`);
                }
            }
            
            updateGameDisplay();
        }

        // ============================
        // –ü–†–û–í–ï–†–ö–ê –°–û–°–¢–û–Ø–ù–ò–Ø
        // ============================
        function checkPetCondition() {
            // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            if (gameState.pet.health < 20) {
                showMessage('‚ö†Ô∏è –ü–∏—Ç–æ–º–µ—Ü —Å–µ—Ä—å–µ–∑–Ω–æ –±–æ–ª–µ–Ω! –°—Ä–æ—á–Ω–æ –∫ –≤—Ä–∞—á—É!');
                petBody.style.animation = 'shake 0.5s infinite';
            } else {
                petBody.style.animation = '';
            }
            
            if (gameState.pet.hunger < 20) {
                showMessage('üçΩÔ∏è –ü–∏—Ç–æ–º–µ—Ü –≥–æ–ª–æ–¥–∞–µ—Ç! –ü–æ–∫–æ—Ä–º–∏—Ç–µ –µ–≥–æ!');
            }
            
            if (gameState.pet.hygiene < 30) {
                showMessage('ü§¢ –ü–∏—Ç–æ–º–µ—Ü –æ—á–µ–Ω—å –≥—Ä—è–∑–Ω—ã–π! –ü–æ–º–æ–π—Ç–µ –µ–≥–æ!');
            }
            
            // –ó–¥–æ—Ä–æ–≤—å–µ —É—Ö—É–¥—à–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–ª–æ—Ö–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö
            if (gameState.pet.hunger < 30 || gameState.pet.hygiene < 30) {
                gameState.pet.health = Math.max(0, gameState.pet.health - 0.3);
            }
        }

        // ============================
        // –°–û–û–ë–©–ï–ù–ò–Ø –ò –°–û–ë–´–¢–ò–Ø
        // ============================
        function showMessage(text) {
            messageElement.textContent = text;
            messageElement.style.animation = 'none';
            setTimeout(() => {
                messageElement.style.animation = 'fadeIn 0.3s';
            }, 10);
        }

        function addEvent(text) {
            const now = new Date();
            const time = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            const eventItem = document.createElement('div');
            eventItem.className = 'event-item';
            eventItem.textContent = `[${time}] ${text}`;
            
            eventsLog.prepend(eventItem);
            gameState.messages.unshift(`[${time}] ${text}`);
            
            // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
            if (eventsLog.children.length > 10) {
                eventsLog.removeChild(eventsLog.lastChild);
            }
        }

        // ============================
        // –°–û–•–†–ê–ù–ï–ù–ò–ï –ò –ó–ê–ì–†–£–ó–ö–ê
        // ============================
        function saveGame() {
            const saveData = {
                type: gameState.pet.type,
                pet: gameState.pet,
                poops: gameState.poops,
                messages: gameState.messages.slice(0, 10),
                lastUpdate: Date.now()
            };
            localStorage.setItem('tamagotchi_live', JSON.stringify(saveData));
        }

        function loadGame() {
            const saved = localStorage.getItem('tamagotchi_live');
            if (saved) {
                const saveData = JSON.parse(saved);
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–æ—Ç –∂–µ –ø–∏—Ç–æ–º–µ—Ü
                if (saveData.type === gameState.pet.type) {
                    const timePassed = Date.now() - saveData.lastUpdate;
                    const minutesPassed = Math.floor(timePassed / (1000 * 60));
                    
                    gameState.pet = {...saveData.pet};
                    gameState.poops = saveData.poops || [];
                    gameState.messages = saveData.messages || [];
                    
                    // –£—Ö—É–¥—à–µ–Ω–∏–µ –∑–∞ –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è
                    if (minutesPassed > 0) {
                        const petData = petsData.find(p => p.id === gameState.pet.type);
                        const degradeMinutes = Math.min(minutesPassed, 180); // –ú–∞–∫—Å 3 —á–∞—Å–∞
                        
                        gameState.pet.hunger = Math.max(0, gameState.pet.hunger - degradeMinutes * 0.3 * petData.hungerRate);
                        gameState.pet.happiness = Math.max(0, gameState.pet.happiness - degradeMinutes * 0.2);
                        gameState.pet.energy = Math.max(0, gameState.pet.energy - degradeMinutes * 0.4);
                        gameState.pet.hygiene = Math.max(0, gameState.pet.hygiene - degradeMinutes * 0.1);
                        
                        // –ö–∞–∫–∞—à–∫–∏ –∑–∞ –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è
                        const additionalPoops = Math.floor(minutesPassed / 30); // –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
                        for (let i = 0; i < Math.min(additionalPoops, 5); i++) {
                            setTimeout(() => makePoop(), i * 1000);
                        }
                    }
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞ —Å–æ–±—ã—Ç–∏–π
                    eventsLog.innerHTML = '';
                    gameState.messages.forEach(msg => {
                        const eventItem = document.createElement('div');
                        eventItem.className = 'event-item';
                        eventItem.textContent = msg;
                        eventsLog.appendChild(eventItem);
                    });
                    
                    showMessage('–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º! –í–∞—à –ø–∏—Ç–æ–º–µ—Ü —Å–æ—Å–∫—É—á–∏–ª—Å—è.');
                    addEvent('–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –∏–≥—Ä—É');
                }
            }
        }

        // ============================
        // –í–û–ó–í–†–ê–¢ –ö –í–´–ë–û–†–£
        // ============================
        function goBackToSelection() {
            if (confirm('–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É –ø–∏—Ç–æ–º—Ü–∞? –¢–µ–∫—É—â–∏–π –ø–∏—Ç–æ–º–µ—Ü –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω.')) {
                saveGame();
                
                gameScreen.style.display = 'none';
                selectionScreen.style.display = 'block';
                
                gameState.selectedPet = null;
                startButton.disabled = true;
                startButton.innerHTML = '<i class="fas fa-play-circle"></i> –ù–∞—á–∞—Ç—å –∑–∞–±–æ—Ç—É';
                
                document.querySelectorAll('.pet-option').forEach(el => {
                    el.classList.remove('selected');
                });
            }
        }

        // ============================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´
        // ============================
        function initGame() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ –ø–∏—Ç–æ–º—Ü–∞
            initPetSelection();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞
            startButton.addEventListener('click', startGame);
            backButton.addEventListener('click', goBackToSelection);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
            document.getElementById('feed-btn').addEventListener('click', feedPet);
            document.getElementById('water-btn').addEventListener('click', waterPet);
            document.getElementById('play-btn').addEventListener('click', playWithPet);
            document.getElementById('sleep-btn').addEventListener('click', toggleSleep);
            document.getElementById('clean-btn').addEventListener('click', cleanPet);
            document.getElementById('heal-btn').addEventListener('click', healPet);
            document.getElementById('toilet-btn').addEventListener('click', useToilet);
            document.getElementById('clean-poop-btn').addEventListener('click', cleanPoop);
            
            // –°–∏—Å—Ç–µ–º–∞ —É—Ö—É–¥—à–µ–Ω–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
            setInterval(degradeStats, 30000); // –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
            setInterval(() => {
                if (!gameState.pet.isSleeping && !gameState.pet.isEating && 
                    !gameState.pet.isDrinking && !gameState.pet.isPlaying &&
                    !gameState.pet.isCleaning && Math.random() < 0.3) {
                    
                    const positions = ['center', 'food', 'water', 'toilet'];
                    const randomPos = positions[Math.floor(Math.random() * positions.length)];
                    movePetTo(randomPos);
                }
            }, 10000);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            setInterval(() => {
                if (!gameState.pet.isSleeping && Math.random() < 0.2) {
                    const messages = [
                        '–ü–æ–∏–≥—Ä–∞–π —Å–æ –º–Ω–æ–π!',
                        '–•–æ—á—É –∫—É—à–∞—Ç—å!',
                        '–ú–æ–∂–µ—Ç, –ø–æ–≥—É–ª—è–µ–º?',
                        '–Ø —Å–∫—É—á–∞—é –ø–æ —Ç–µ–±–µ!',
                        '–í—Ä–µ–º—è –¥–ª—è –∏–≥—Ä!'
                    ];
                    showMessage(messages[Math.floor(Math.random() * messages.length)]);
                }
            }, 15000);
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            window.addEventListener('beforeunload', saveGame);
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
